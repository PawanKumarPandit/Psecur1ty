<!doctype html><html lang=en-us>

<!-- Mirrored from www.kali.org/docs/development/live-build-a-custom-kali-iso/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 07:14:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head itemscope itemtype=https://www.kali.org/>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title itemprop=name>Creating A Custom Kali ISO | Kali Linux Documentation</title>
<meta itemprop=name content="Creating A Custom Kali ISO | Kali Linux Documentation">
<meta name=application-name content="Creating A Custom Kali ISO | Kali Linux Documentation">
<meta name=twitter:title content="Creating A Custom Kali ISO | Kali Linux Documentation">
<meta property="og:site_name" content="Kali Linux">
<meta property="og:title" content="Creating A Custom Kali ISO | Kali Linux Documentation">
<meta itemprop=description content="An Introduction to Building Your Own Kali ISO Building a customized Kali Linux image is not as complex as you may be thinking. It is easy, fun, and rewarding! Kali Linux traditionally, has been a Live Image, but since Kali 2020.1 an Installer Image was introduced. Both these images have different functions, and are also built in different ways.">
<meta name=description content="An Introduction to Building Your Own Kali ISO Building a customized Kali Linux image is not as complex as you may be thinking. It is easy, fun, and rewarding! Kali Linux traditionally, has been a Live Image, but since Kali 2020.1 an Installer Image was introduced. Both these images have different functions, and are also built in different ways.">
<meta name=twitter:description content="An Introduction to Building Your Own Kali ISO Building a customized Kali Linux image is not as complex as you may be thinking. It is easy, fun, and rewarding! Kali Linux traditionally, has been a Live Image, but since Kali 2020.1 an Installer Image was introduced. Both these images have different functions, and are also built in different ways.">
<meta property="og:description" content="An Introduction to Building Your Own Kali ISO Building a customized Kali Linux image is not as complex as you may be thinking. It is easy, fun, and rewarding! Kali Linux traditionally, has been a Live Image, but since Kali 2020.1 an Installer Image was introduced. Both these images have different functions, and are also built in different ways.">
<meta name=keywords content="kali,linux,kalilinux,Penetration,Testing,Penetration Testing,Distribution,Advanced">
<meta name=apple-mobile-web-app-status-bar-style content="black-translucent">
<meta name=msapplication-navbutton-color content="#367BF0">
<meta name=theme-color content="#367BF0">
<meta name=language content="English">
<meta property="og:locale" content="en_US">
<meta itemprop=image content="../../../images/kali-logo.svg">
<meta property="og:image" content="../../../images/kali-logo.svg">
<meta name=twitter:image content="../../../images/kali-logo.svg">
<meta name=twitter:image:src content="../../../images/kali-logo.svg">
<meta property="og:updated_time" content="2021-12-12T00:00:00Z">
<meta name=twitter:site content="@kalilinux">
<meta name=twitter:creator content="@kalilinux">
<link rel="alternate icon" class=js-site-favicon type=image/png href=../../../images/favicon.png>
<link rel=icon class=js-site-favicon type=image/svg+xml href=../../../images/favicon.svg>
<base 
<link rel=canonical href=index.html itemprop=url>
<meta name=twitter:url content="index.html">
<meta name=url content="index.html">
<meta property="og:url" content="index.html">
<link rel=sitemap type=application/xml title=Sitemap href=../../../sitemap.xml>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=alternate>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=feed>
<link href=../../../style.min.css rel=stylesheet>
<style>:root{--primary-color:#367BF0;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Noto Sans}body.dark-theme{--body-color:black;--text-color:#e1e1e1;--text-color-dark:white;--white-color:#121212;--light-color:#1A1A1A}</style>
<script>const $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document)</script>
</head>
<body>
<header>
<nav class=container>
<a id=logo href=../../../index.html style=background-image:url(../../../images/kali-logo.svg)></a>
<ul id=navigation>
<li>
<a href=../../../get-kali/index.html>Get Kali</a>
</li>
<li>
<a href=../../../blog/index.html>Blog</a>
</li>
<li class=dropdown-menu>
<span>Documentation <i class=ti-angle-down></i></span>
<div>
<a href=../../index.html>Kali Linux Documentation</a>
<a href=../../../tools/index.html>Kali Tools Documentation</a>
<a href="https://bugs.kali.org/search.php?project_id=1&amp;category_id[]=General%20Bug&amp;category_id[]=Kali%20Package%20Bug&amp;category_id[]=Kali%20Package%20Improvement&amp;status[]=30&amp;status[]=40&amp;status[]=50&amp;sticky=on&amp;sort=id%2Clast_updated&amp;dir=DESC%2CDESC&amp;hide_status=-2&amp;match_type=0">Known Issues</a>
</div>
</li>
<li class=dropdown-menu>
<span>Community <i class=ti-angle-down></i></span>
<div>
<a href=../../../community/index.html>Community Support</a>
<a href=https://forums.kali.org/>Kali Linux Forums</a>
<a href=ircs://irc.oftc.net:6697/#Kali-Linux>Real Time Chat</a>
<a href=../../../newsletter/index.html>Join Newsletter</a>
<a href=https://http.kali.org/README.mirrorlist>Mirror Location</a>
<a href=../../community/contribute/index.html>Get Involved</a>
</div>
</li>
<li class=dropdown-menu>
<span>Courses <i class=ti-angle-down></i></span>
<div>
<a href=https://portal.offensive-security.com/courses/pen-103>Kali Linux Revealed (KLCP/PEN-103)</a>
<a href=https://www.offensive-security.com/pwk-oscp/>PEN-200 (PWK/OSCP)</a>
<a href=https://www.offensive-security.com/wifu-oswp/>PEN-210 (WiFu/OSWP)</a>
<a href=https://www.offensive-security.com/pen300-osep/>PEN-300 (ETBD/OSEP)</a>
<a href=https://www.offensive-security.com/web200-oswa/>WEB-200 (WAWK/OSWA)</a>
<a href=https://www.offensive-security.com/awae-oswe/>WEB-300 (AWAE/OSWE)</a>
<a href=https://www.offensive-security.com/exp301-osed/>EXP-301 (WUMED/OSED)</a>
<a href=https://www.offensive-security.com/exp312-osmr/>EXP-312 (MCB/OSMR)</a>
<a href=https://www.offensive-security.com/awe-osee/>EXP-401 (AWE/OSEE)</a>
<a href=https://www.offensive-security.com/soc200-osda/>SOC-200 (AWE/OSDA)</a>
</div>
</li>
<li class=dropdown-menu>
<span>Developers <i class=ti-angle-down></i></span>
<div>
<a href=https://gitlab.com/kalilinux>Git Repositories</a>
<a href=https://pkg.kali.org/>Packages</a>
<a href=https://autopkgtest.kali.org/>Auto Package Test</a>
<a href=https://bugs.kali.org/>Bug Tracker</a>
<a href=https://stats.nethunter.com/>Kali NetHunter Stats</a>
</div>
</li>
<li class=dropdown-menu>
<span>About <i class=ti-angle-down></i></span>
<div>
<a href=../../../features/index.html>Kali Linux Overview</a>
<a href=https://gitlab.com/kalilinux/documentation/graphic-resources>Gallery & Press Pack</a>
<a href=../../../about-us/index.html>Meet The Kali Team</a>
<a href=../../../partnerships-sponsorships/index.html>Partnerships & Friends</a>
<a href=../../../contact/index.html>Contact Us</a>
</div>
</li>
</ul>
<button title="show menu">
<div></div>
<div></div>
<div></div>
</button>
</nav>
</header>
<main class=container>
<aside class=card>
<a href=../index.html title="↤ Go back"></a>
<ul>
<li>
<a href=../index.html>Kali Development</a>
<ul>
<li>
<a href=../contributing-runtime-tests/index.html>Contributing run-time tests with autopkgtest</a>
</li>
<li>
<a href=../custom-beaglebone-black-image/index.html>Custom Beaglebone Black Image</a>
</li>
<li>
<a href=../custom-chromebook-kernel-image/index.html>Custom Chromebook Image</a>
</li>
<li>
<a href=../custom-cubox-image/index.html>Custom CuBox Image</a>
</li>
<li>
<a href=../custom-efikamx-image/index.html>Custom EfikaMX Image</a>
</li>
<li>
<a href=../custom-kali-arm-ss808-image/index.html>Custom MK/SS808 Image</a>
</li>
<li>
<a href=../custom-odroid-kernel-image/index.html>Custom ODROID X2 U2 Image</a>
</li>
<li>
<a href=../custom-raspberry-pi-image/index.html>Custom Raspberry Pi Image</a>
</li>
<li>
<a href=../setting-up-packaging-system/index.html>Setting Uup a system for packaging</a>
</li>
<li>
<a href=../intro-to-packaging-example/index.html>Introduction to packaging step-by-step example</a>
</li>
<li>
<a href=../intermediate-packaging-example/index.html>Intermediate packaging step-by-step example</a>
</li>
<li>
<a href=../advanced-packaging-example/index.html>Advanced Packaging Step-By-Step Example (FinalRecon & Python-icmplib)</a>
</li>
<li>
<a href=../leveraging-the-kali-bot/index.html>Getting the best out of the Kali Bot</a>
</li>
<li>
<a href=../generate-updated-kali-iso/index.html>Generate an Updated Kali ISO</a>
</li>
<li class=active>
<a href=index.html>Creating A Custom Kali ISO</a>
</li>
<li>
<a href=../dojo-mastering-live-build/index.html>Building Custom Kali ISOs</a>
</li>
<li>
<a href=../rebuilding-a-package-from-source/index.html>Rebuilding a Source Package</a>
</li>
<li>
<a href=../recompiling-the-kali-linux-kernel/index.html>Recompiling the Kali Linux Kernel</a>
</li>
<li>
<a href=../kali-linux-arm-chroot/index.html>Preparing a Kali Linux ARM chroot</a>
</li>
<li>
<a href=../arm-cross-compilation-environment/index.html>ARM Cross-Compilation</a>
</li>
<li>
<a href=../packaging-apps-with-kaboxer/index.html>Packaging Applications with Kaboxer</a>
</li>
</ul>
</li>
</ul>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
</aside>
<section>
<article class=card>
<h2>Creating A Custom Kali ISO</h2>
<div id=content>
<h2 id=an-introduction-to-building-your-own-kali-iso>An Introduction to Building Your Own Kali ISO</h2>
<p>Building a customized Kali Linux image is not as complex as you may be thinking. It is easy, fun, and rewarding! Kali Linux traditionally, has been a <strong>Live Image</strong>, but since <a href=../../../blog/kali-linux-2020-1-release/index.html>Kali 2020.1</a> an <strong>Installer Image</strong> was introduced. Both these images have <a href=../../introduction/what-image-to-download/index.html>different functions</a>, and are also built in different ways.</p>
<ul>
<li>Live Image - allows you to try Kali, without altering the system (making it great for <a href=../../usb/index.html>USB</a>). It is created using <a href=https://live-team.pages.debian.net/live-manual/html/live-manual/index.en.html>live-build</a></li>
<li>Installer Image - allows for you to customize Kali by picking packaging during installation, such as picking the <a href=../../general-use/switching-desktop-environments/index.html>desktop environment</a> as well as what <a href=../../general-use/metapackages/index.html>metapackages</a> get installed. This image is powered by <a href=https://wiki.debian.org/Simple-CDD>simple-cdd</a> <em>(which uses <code>debian-cd</code> to make <code>Debian-Installer</code>)</em>.</li>
</ul>
<p>You can configure virtually any aspect of your Kali ISO build, such as adding packages from outside of Kali network repositories, unattended installations to changing the default wallpaper. Our build-scripts provides a framework that uses a configuration set to automate and customize all aspects of building the images. The Kali Linux development team use the same build-scripts to produce the official Kali ISO releases.</p>
<h2 id=where-should-you-build-your-iso>Where Should You Build Your ISO?</h2>
<p>Ideally, you should build your custom Kali ISO from <strong>within a pre-existing Kali environment</strong>, as there is less chance of items going wrong. However, it is possible to generate the images on a Non-Kali but still a Debian-Based system.</p>
<h2 id=kali-environment>Kali Environment</h2>
<h4 id=getting-ready--setting-up-the-build-script-kali-system>Getting Ready — Setting Up The build-script Kali System</h4>
<p>We first need to prepare the Kali ISO build environment by installing and setting up the required packages with the following commands:</p>
<pre><code class=language-console>kali@kali:~$ sudo apt update
kali@kali:~$ sudo apt install -y git live-build simple-cdd cdebootstrap curl
kali@kali:~$
kali@kali:~$ git clone https://gitlab.com/kalilinux/build-scripts/live-build-config.git
</code></pre>
<h4 id=building-an-updated-live-image>Building an Updated Live Image</h4>
<p>Now you can simply build an updated Kali ISO <em>(with our default configuration)</em> by entering the <code>live-build-config/</code> directory and running our <code>build.sh</code> wrapper script, as follows:</p>
<pre><code class=language-console>kali@kali:~$ cd live-build-config/
kali@kali:~/live-build-config$ ./build.sh --verbose
[...]
***
GENERATED KALI IMAGE: ./images/kali-linux-rolling-live-amd64.iso
***
kali@kali:~$
</code></pre>
<p>The <code>build.sh</code> script will take a while to complete, as it downloads all of the required packages needed to create your ISO. Good time for a drink.</p>
<h4 id=building-an-updated-installer-image>Building an Updated Installer Image</h4>
<p>By default, it will generate a <strong>Live Image</strong>. If you want an <strong>Installer Image</strong>, add <code>--installer</code>:</p>
<pre><code class=language-console>kali@kali:~/live-build-config$ ./build.sh --verbose --installer
</code></pre>
<p>We are using the <code>--verbose</code> to output more on the screen rather than it being captured in just the <code>build.log</code> output. If you want even more output, you can use <code>--debug</code> instead, which will then give even more information.</p>
<hr>
<h2 id=non-kali-debian-based-environment>Non-Kali Debian-Based Environment</h2>
<h4 id=setting-up-the-build-script-non-kali-debian-based-system>Setting Up The build-script Non-Kali Debian-Based System</h4>
<p>You can build an Kali ISO on a Debian-based systems other than Kali Linux. The instructions below have been tested to work with both Debian and Ubuntu.</p>
<p>First, we prepare the system by ensuring it is fully updated, then proceed to download the Kali archive keyring and packages:</p>
<pre><code class=language-console>$ sudo apt update
$ sudo apt full-upgrade -y
$
$ wget https://http.kali.org/pool/main/k/kali-archive-keyring/kali-archive-keyring_2020.2_all.deb
$ wget https://http.kali.org/kali/pool/main/l/live-build/live-build_20210407_all.deb
</code></pre>
<p><em>Note: You may need to check that<code>kali-archive-keyring_20YY.X_all.deb</code> & <code>live-build_20YYMMDD_all.deb</code> are the latest files.</em></p>
<p>With that completed, we install some additional dependencies and the previously downloaded files:</p>
<pre><code class=language-console>$ sudo apt install -y git live-build simple-cdd cdebootstrap curl
$
$ sudo dpkg -i kali-archive-keyring_2020.2_all.deb
$ sudo dpkg -i live-build_20210407_all.deb
</code></pre>
<p>With the environment all prepared, we start the process by setting up the build-script profile and clone out the build config:</p>
<pre><code class=language-console>$ cd /usr/share/debootstrap/scripts/
$ (echo &quot;default_mirror http://http.kali.org/kali&quot;; sed -e &quot;s/debian-archive-keyring.gpg/kali-archive-keyring.gpg/g&quot; sid) &gt; /tmp/kali
$ sudo mv /tmp/kali .
$ sudo ln -s kali kali-rolling
$
$ cd ~/
$ git clone https://gitlab.com/kalilinux/build-scripts/live-build-config.git
$
$ cd live-build-config/
</code></pre>
<p>At this point, depending on the host OS and its version, we may need to edit <code>build.sh</code> to bypass a version check for <strong>debootstrap</strong>. We do this by commenting out the <code>exit 1</code> below:</p>
<pre><code class=language-console>$ cat build.sh
...
		ver_debootstrap=$(dpkg-query -f '${Version}' -W debootstrap)
		if dpkg --compare-versions &quot;$ver_debootstrap&quot; lt &quot;1.0.97&quot;; then
			echo &quot;ERROR: You need debootstrap (&gt;= 1.0.97), you have $ver_debootstrap&quot; &gt;&amp;2
			exit 1
		fi
...
$
</code></pre>
<p>With the above change made, <code>build.sh</code> should look similar:</p>
<pre><code class=language-console>$ cat build.sh
...
		ver_debootstrap=$(dpkg-query -f '${Version}' -W debootstrap)
		if dpkg --compare-versions &quot;$ver_debootstrap&quot; lt &quot;1.0.97&quot;; then
			echo &quot;ERROR: You need debootstrap (&gt;= 1.0.97), you have $ver_debootstrap&quot; &gt;&amp;2
			#exit 1
		fi
...
$
</code></pre>
<p>At this point, we can build our ISO as normal:</p>
<pre><code class=language-console>$ ./build.sh --verbose
</code></pre>
<hr>
<h2 id=re-building-the-latest-kali-image>Re-building the Latest Kali Image</h2>
<p>By using the <a href=../../general-use/kali-branches/index.html>kali-last-snapshot</a> branch, you are able to re-create the latest distributed image. We can do this by using <code>--distribution kali-last-snapshot</code>:</p>
<pre><code class=language-console>kali@kali:~$ time ./build.sh \
  --verbose \
  --installer \
  --distribution kali-last-snapshot \
  --version 2021.4 \
  --subdir kali-2021.4
[...]
***
GENERATED KALI IMAGE: ./images/kali-2021.4/kali-linux-2021.4-installer-amd64.iso
***
kali@kali:~$
</code></pre>
<hr>
<h2 id=configuring-the-kali-iso-build-optional>Configuring The Kali ISO Build (Optional)</h2>
<p>If you want to customize your Kali Linux ISO, this section will explain some of the details. Through the <code>kali-config/</code> directory, there are a wide range of customization options, which are well-documented for <a href=https://live-team.pages.debian.net/live-manual/html/live-manual/customization-overview.en.html>live-build</a> page. Simple-CD is a little more limited with options. For the impatient, here are some of the highlights.</p>
<h4 id=building-kali-live-with-different-desktop-environments>Building Kali Live With Different Desktop Environments</h4>
<p>Since <a href=../../../blog/kali-linux-2-0-release/index.html>Kali 2.0</a>, we now support built in configurations for various <a href=../../general-use/switching-desktop-environments/index.html>desktop environments</a>, including Xfce <em>(default)</em>, Gnome, KDE, E17, I3WM, LXDE, MATE. To build any of these, you would use syntax similar to the following:</p>
<pre><code class=language-console>kali@kali:~/live-build-config$ # These are the different Desktop Environment build options:
kali@kali:~/live-build-config$ #./build.sh --variant {xfce,gnome,kde,mate,e17,lxde,i3wm} --verbose
kali@kali:~/live-build-config$
kali@kali:~/live-build-config$ # To build a Gnome ISO:
kali@kali:~/live-build-config$ ./build.sh --variant gnome --verbose
kali@kali:~/live-build-config$
kali@kali:~/live-build-config$ # To build a KDE ISO:
kali@kali:~/live-build-config$ ./build.sh --variant kde --verbose
</code></pre>
<p>This is not required with the installer images, as it includes Xfce, Gnome and KDE by default. You can add others by including their packages as explained in the section below.</p>
<h4 id=controlling-the-packages-included-in-your-build>Controlling The Packages Included In Your Build</h4>
<p>The list of packages included in your build will be present in the the respective <code>kali-config/</code> directory. For example, if you&rsquo;re wanting to edit:</p>
<ul>
<li>The default Installer ISO, you would use the following package lists file - <code>kali-config/installer-default/packages</code></li>
<li>The default Live ISO, you would use the following package lists file - <code>kali-config/variant-default/package-lists/kali.list.chroot</code></li>
<li>A non-default Live ISO desktop environment, such as Gnome - <code>kali-config/variant-gnome/package-lists/kali.list.chroot</code> <em>(You can replace Gnome with any supported desktop environments)</em></li>
</ul>
<p>By default, these lists will includes the <a href=../../general-use/metapackages/index.html><strong>kali-linux-default</strong> metapackage</a>, as well as some others. These can be commented out and replaced with a manual list of packages to include in the ISO for greater granularity.</p>
<h4 id=overlaying-files-in-your-build>Overlaying Files In Your Build</h4>
<p>With Live images, you have the option to include additional files or scripts in your build by overlaying them on the existing file-system, inside the <code>includes.{chroot,binary,installer}</code> directories, respectively.</p>
<p>For example, if we wanted to include our own custom script into the <code>/root/</code> directory of the ISO (this would correspond to the <strong>chroot</strong> stage), then we would drop this script file in the <code>kali-config/common/includes.chroot/</code> directory before building the ISO.</p>
<p>For more information see the <a href=https://live-team.pages.debian.net/live-manual/html/live-manual/customizing-contents.en.html>live-build documentation</a>.</p>
<h4 id=build-hooks-binary-and-chroot>Build Hooks, Binary and Chroot</h4>
<p>For live images, live-build supports hooks allows us to &ldquo;hook scripts&rdquo; in various stages of the Kali ISO live image. For more detailed information about hooks and how to use them, refer to the <a href=https://live-team.pages.debian.net/live-manual/html/live-manual/customizing-contents.en.html#507>live-build manual</a>.</p>
<p>As an example, we recommend you check out the existing hooks in <code>kali-config/common/hooks/</code>.</p>
<hr>
<h2 id=building-a-kali-linux-iso-for-different-architectures-optional>Building a Kali Linux ISO for Different Architectures (Optional)</h2>
<p>By default, the build-script will generate the Kali image based on the architectures of the current operating system. If you wish to alter this:</p>
<ul>
<li>x64: <code>./build.sh --verbose --arch amd64</code></li>
<li>x86: <code>./build.sh --verbose --arch i386</code></li>
</ul>
<h4 id=building-a-kali-linux-iso-for-older-i386-architectures>Building a Kali Linux ISO for Older i386 Architectures</h4>
<p>The Kali Linux i386 ISO has PAE enabled. If you require a default kernel for older hardware with PAE disabled, you will need to rebuild a Kali Linux ISO. The rebuilding process is much the same as described above, except that the <strong>686-pae</strong> parameter needs to be changed to <strong>686</strong> in <code>auto/config</code> before building:</p>
<pre><code class=language-console>kali@kali:~/live-build-config$ sed -i 's/686-pae/686/g' auto/config
kali@kali:~/live-build-config$
kali@kali:~/live-build-config$ ./build.sh --verbose --arch i386
</code></pre>
<hr>
<h2 id=using-a-custom-network-mirror-for-building-optional>Using A Custom Network Mirror For Building (Optional)</h2>
<p>If you build multiple images, you will find you are often waiting on <code>build.sh</code> to finish. There are a few ways to speed up the build process, such as:</p>
<ul>
<li>Building Installer images as they often build quicker than Live images</li>
<li>Have less packages included (such as switching <code>kali-linux-default</code> to <code>kali-linux-top10</code>)</li>
<li>Improve access to packages</li>
</ul>
<p>You often find that you are waiting on packages to be pulled down. You can either setup a local proxy on the same machine (such as <code>apt-cacher</code> or <code>apt-cacher-ng</code>). Alternatively, you can setup a <a href=../../community/setting-up-a-kali-linux-mirror/index.html>local network mirror</a>.</p>
<p>We can instruct the build-script to use a different mirror, by doing the following (assuming our network mirror is located at <code>http://192.168.0.101/kali</code>):</p>
<pre><code class=language-console>kali@kali:~/live-build-config$ echo &quot;http://192.168.0.101/kali/&quot; &gt; .mirror
kali@kali:~/live-build-config$ ./build.sh --verbose
</code></pre>
<hr>
<h2 id=help-screen>Help Screen</h2>
<p>You can see all the available command-line options by doing <code>--help</code>:</p>
<pre><code class=language-console>kali@kali:~/live-build-config$ ./build.sh --help
Usage: ./build.sh [&lt;option&gt;...]

  --distribution &lt;arg&gt;
  --proposed-updates
  --arch &lt;arg&gt;
  --verbose
  --debug
  --salt
  --installer
  --live
  --variant &lt;arg&gt;
  --version &lt;arg&gt;
  --subdir &lt;arg&gt;
  --get-image-path
  --no-clean
  --clean
  --help

More information: https://www.kali.org/docs/development/live-build-a-custom-kali-iso/
kali@bDesktop:~/live-build-config$
</code></pre>
<hr>
<h2 id=testing-built-image>Testing Built Image</h2>
<p>After producing the issue, you can treat it like any Kali base image, so you can <a href=../../installation/index.html>install</a> it (either on bare metal or <a href=../../virtualization/index.html>virtually</a>), or copy to a CD/DVD/<a href=../../usb/index.html>USB</a>.</p>
<p>If you are wanting to quickly test the image before putting it &ldquo;in production&rdquo;, we can use <a href=https://packages.debian.org/sid/qemu>qemu</a> (and <a href=https://packages.debian.org/sid/ovmf>ovmf</a> for UEFI). First we install the packages:</p>
<pre><code class=language-console>kali@kali:$ sudo apt update
kali@kali:$ sudo apt install -y qemu qemu-system-x86 ovmf
</code></pre>
<p>Next we produce a hard disk to use:</p>
<pre><code class=language-console>kali@kali:$ qemu-img create \
  -f qcow2 \
  /tmp/kali-test.hdd.img \
  20G
</code></pre>
<p>Afterwards, to boot from the image produced <em>(we will be using the Live image on x64)</em>:</p>
<pre><code class=language-console>kali@kali:$ qemu-system-x86_64 \
  -enable-kvm \
  -drive if=virtio,aio=threads,cache=unsafe,format=qcow2,file=/tmp/kali-test.hdd.img \
  -cdrom /home/kali/live-build-config/images/kali-linux-rolling-live-amd64.iso \
  -boot once=d
</code></pre>
<p>The above will be a &ldquo;BIOS&rdquo; boot. For a &ldquo;UEFI&rdquo; boot:</p>
<pre><code class=language-console>kali@kali:$ qemu-system-x86_64 \
  -enable-kvm \
  -drive if=virtio,aio=threads,cache=unsafe,format=qcow2,file=/tmp/kali-test.hdd.img \
  -drive if=pflash,format=raw,readonly,file=/usr/share/OVMF/OVMF_CODE.fd \
  -drive if=pflash,format=raw,readonly,file=/usr/share/OVMF/OVMF_VARS.fd \
  -cdrom /home/kali/live-build-config/images/kali-linux-rolling-live-amd64.iso \
  -boot once=d
</code></pre>
<p><em>Note: We have set UEFI configuration file to be read only</em></p>
</div>
<hr>
<p id=post-meta>
Updated on: 2021-Dec-12<br>
Author:
<a href=https://gitlab.com/g0tmi1k rel=”nofollow” title="g0tmi1k's profile">g0tmi1k</a>
</p>
<hr>
<div id=pagination>
<a href=https://gitlab.com/kalilinux/documentation/kali-docs/edit/master/development/live-build-a-custom-kali-iso/index.md rel=noopener target=blank>
<i class=ti-pencil-alt></i>&nbsp;Edit this page
</a>
<div></div>
<a href=../generate-updated-kali-iso/index.html>
<i class=ti-arrow-left></i>
<span>Generate an Updated Kali ISO</span>
</a>
<a href=../dojo-mastering-live-build/index.html>
<span>Building Custom Kali ISOs</span>
<i class=ti-arrow-right></i>
</a>
</div>
</article>
</section>
</main>
<script src=../../../plugins/highlight/highlight.pack.js></script>
<script>hljs.registerLanguage('shell',a=>({name:'Shell Session',aliases:['console','shellsession'],contains:[{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*$/},{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*/,starts:{end:/[^\\]$/,subLanguage:'bash'}},{className:'prompt',begin:/┌──\([^)]+\)-\[~?[/\w-]*\]\n└─[#$]/,starts:{end:/[^\\]$/,subLanguage:'bash'}}]})),hljs.highlightAll(),window.addEventListener('DOMContentLoaded',()=>$$('.hljs-prompt').forEach(a=>{let c='#2777ff',b='#5EBDAB';/#\s*$/.test(a.innerHTML)&&(c='#EC0101',b='#367BF0'),a.innerHTML=a.innerHTML.replace(/([^)]+)(:)(~?[/\w.-]*)([#$])/,`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="font-weight:bold;color:${b}">$3</span>`+`<span style="color:white;">$4</span>`),a.innerHTML=a.innerHTML.replace(/┌──\(([^)]+)\)-\[(~?[/\w.-]*)\]\n└─([#$])/,`<span style="color:${b}">┌──(</span>`+`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:${b}">)-[</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="color:${b}">]\n`+`└─</span><span style="color:${c};font-weight:bold">$3</span>`)}),!1)</script>
<footer>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
<div class=container>
<div>
<h4>Downloads</h4>
<a href=../../../get-kali/index.html rel=noopener target=_blank>Kali Linux</a>
<a href=../../../get-kali/index.html#kali-mobile rel=noopener target=_blank>Kali NetHunter</a>
<h4>Links</h4>
<a href=../../../index.html rel=noopener target=_blank>Home</a>
<a href=../../../blog/index.html rel=noopener target=_blank>Blog</a>
<a href=../../index.html rel=noopener target=_blank>Documentation</a>
<a href=../../../tools/index.html rel=noopener target=_blank>Tools</a>
<a href=https://forums.kali.org/ rel=noopener target=_blank>Support Forum</a>
<a href=https://bugs.kali.org/ rel=noopener target=_blank>Bug Tracker</a>
<a href=https://status.kali.org/ rel=noopener target=_blank>System Status</a>
</div>
<div>
<h4>Policies</h4>
<a href=../../policy/cookie/index.html>Cookie Policy</a>
<a href=../../policy/privacy/index.html>Privacy Policy</a>
<a href=../../policy/trademark/index.html>Trademark Policy</a>
<h4>Follow Us</h4>
<a href=https://twitter.com/kalilinux title=Twitter rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717.0-4.92 2.203-4.92 4.917.0.39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475.0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314.0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39.0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054.0 13.999-7.496 13.999-13.986.0-.209.0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
Twitter
</a>
<a href=https://www.facebook.com/kalilinux title=Facebook rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.9981 11.9991C23.9981 5.37216 18.626.0 11.9991.0 5.37216.0.0 5.37216.0 11.9991c0 5.9891 4.38789 10.9531 10.1242 11.8533V15.4676H7.07758V11.9991H10.1242V9.35553c0-3.00727 1.7914-4.66839 4.5322-4.66839 1.3128.0 2.686.23435 2.686.23435v2.9529h-1.513C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991h3.3279l-.532 3.4685H13.8739v8.3848C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991z"/></svg>
Facebook
</a>
<a href=https://gitlab.com/kalilinux title=GitLab rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.955 13.587l-1.342-4.135-2.664-8.189c-.135-.423-.73-.423-.867.0L16.418 9.45H7.582L4.919 1.263C4.783.84 4.185.84 4.05 1.26L1.386 9.449.044 13.587c-.121.375.014.789.331 1.023L12 23.054l11.625-8.443c.318-.235.453-.647.33-1.024"/></svg>
GitLab
</a>
<a href=https://github.com/kalilinux title=GitHub rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
GitHub
</a>
<a href=https://www.microsoft.com/en-us/p/kali-linux/9pkr34tncv07 title="Microsoft Store" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zm12.6.0H12.6V0H24v11.4z"/></svg>
Microsoft Store
</a>
<a href=https://hub.docker.com/u/kalilinux title=Docker rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M4.82 17.275c-.684.0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748.0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594.0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998.0H4.383v2.42h2.422V9.518l-.01.003zm3.03.0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03.0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045.0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
Docker
</a>
<a href=https://app.vagrantup.com/kalilinux title=Vagrant rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.672 6.774V4.917l3.164-1.822L3.56.005.397 1.852v2.263L7.52 21.41 12 23.995v-6.496l2.107-1.224-.024-.015 4.245-9.486V4.917l5.275-3.065L20.439.005l-5.272 3.087h-.003v2.11L12 12.584v2.467l-2.11 1.224zm3.164-3.66L8.814 3.1 5.672 4.917v1.857l4.218 9.501L12 15.234v-2.65L8.836 5.202zm9.492 1.803v1.857l-4.22 9.101L12 17.332v6.663l4.521-2.607L23.603 4.05V1.852z"/></svg>
Vagrant
</a>
<a href=https://aws.amazon.com/marketplace/pp/B08LL91KKB title="Amazon AWS" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183.0.08-.048.16-.152.24l-.503.335a.383.383.0 01-.208.072c-.08.0-.16-.04-.239-.112a2.47 2.47.0 01-.287-.375 6.18 6.18.0 01-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67.0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533.0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272.0.551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28.0-.568.031-.863.103s-.583.16-.862.272a2.287 2.287.0 01-.28.104.488.488.0 01-.127.023c-.112.0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597.0 01.224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84.0 011.246-.151c.95.0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263.0.534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66.0 00-.735-.136 6.02 6.02.0 00-.75-.048c-.535.0-.926.104-1.19.32-.263.215-.39.518-.39.917.0.375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144.0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398.0 01-.072-.32c0-.128.064-.2.191-.2h.783c.151.0.255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549.0 01.32-.08h.638c.152.0.256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52.0 01.311-.08h.743c.127.0.2.065.2.2.0.04-.009.08-.017.128a1.137 1.137.0 01-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51.0 01-.303.08h-.687c-.151.0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415.0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563.0 01-.048-.224v-.407c0-.167.064-.247.183-.247.048.0.096.008.144.024s.12.048.2.08c.271.12.566.215.878.279.319.064.63.096.95.096.502.0.894-.088 1.165-.264a.86.86.0 00.415-.758.777.777.0 00-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902.0 01-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175.0.359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69.0 01.24.2.43.43.0 01.071.263v.375c0 .168-.064.256-.184.256a.83.83.0 01-.303-.096 3.652 3.652.0 00-1.532-.311c-.455.0-.815.071-1.062.223-.248.152-.375.383-.375.71.0.224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117.0.343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zm1.509 3.88c-2.626 1.94-6.442 2.969-9.722 2.969-4.598.0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914.0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zm1.094-1.246c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z"/></svg>
Amazon AWS
</a>
<a href=https://azuremarketplace.microsoft.com/en/marketplace/apps/kali-linux.kali-linux title="Microsoft Azure" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.483 21.3H24L14.025 4.013l-3.038 8.347 5.836 6.938L5.483 21.3zM13.23 2.7 6.105 8.677.0 19.253h5.505v.014L13.23 2.7z"/></svg>
Microsoft Azure
</a>
<a href=../../../rss.xml title=RSS rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg>
RSS
</a>
</div>
<div><svg id="footer-logo" viewBox="0 0 135.47 135.47"><path fill="currentcolor" d="m71.766 36.352s-10.212-.6795-27.602 4.7619c-17.722 5.5452-27.773 13.405-27.773 13.405s26.414-14.748 56.228-15.586zm38.09 16.035 1.3276-.08664s-7.6062-9.2286-22.165-13.724c8.1839 3.3267 15.307 7.7345 20.837 13.81zm2.1727 3.8344c.20411-.3539.86302 1.1243 1.3634 1.7453.0212.124.0564.19967-.23373.13998-.0244-.12747-.0665-.16444-.0665-.16444s-.70029-.41667-.91499-.71224c-.21487-.29556-.253-.81255-.14825-1.0086zm17.867 43.93s1.6147-18.538-27.511-22.812c-3.6915-.54163-8.3599-.9585-13.082-.97044-23.344.30865-24.195-26.924-6.6044-28.299 7.2901-.60152 15.995 3.3311 24.505 7.2941-.0316 1.0569.0121 1.9961.70646 2.864.69414.86762 3.3607 1.8142 4.2128 2.3031.85203.48907 3.5816 2.2245 5.2543 4.4017.36275-.67854 3.3921-2.6504 3.3921-2.6504s-.72571.01579-2.414-.61519c-1.6885-.63098-3.6921-2.5401-3.7395-2.6504-.0473-.11052-.0788-.28401.31578-.36295.2996-.25224-.37893-1.0727-.67874-1.3723-.2996-.2998-2.3036-3.7073-2.3508-3.7863-.0473-.07894-.0632-.1577-.20507-.25243-.4419-.1421-2.3826.20506-2.3826.20506s-2.9847-1.4659-4.0135-4.6264c.015.55358-.5118 1.158.0 2.4298-1.5562-.65832-2.8929-1.7811-3.9472-4.5557-.62751 1.5781.0 2.5815.0 2.5815s-3.6646-1.024-4.2509-4.4036c-.6435 1.5171.0 2.4296.0 2.4296s-5.9742-3.1172-15.901-3.1624c-6.646-.60961-8.0296-12.301-7.4139-14.269.0.0-9.586-5.0521-28.456-7.2841-18.87-2.2322-34.346-.33638-34.346-.33638s33.421-1.6039 60.195 9.2356c.91018 4.0709 3.6482 10.851 5.1229 14.11-4.2197 2.9175-8.9781 5.6609-9.7191 15.391-.74074 9.7297 7.6245 18.288 17.998 18.552 9.8502.52469 16.656.59921 24.905 4.8759 7.8739 4.3537 14.33 17.62 14.969 29.551.69008-8.8524-2.632-27.889-18.134-33.669 21.667 3.7917 23.573 19.854 23.573 19.854zm-58.64-65.253-.77963-2.5147s-12.864-2.2844-30.16-1.055c-17.296 1.2294-34.759 7.2839-34.759 7.2839s35.732-8.991 65.698-3.7143"/></svg>
© OffSec Services Limited 2022. All rights reserved.
</div>
</div>
</footer>
<script src=../../../script.min.js></script>
</body>

<!-- Mirrored from www.kali.org/docs/development/live-build-a-custom-kali-iso/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 07:14:58 GMT -->
</html>