<!doctype html><html lang=en-us>

<!-- Mirrored from www.kali.org/docs/development/setting-up-packaging-system/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 07:56:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head itemscope itemtype=https://www.kali.org/>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title itemprop=name>Setting Uup a system for packaging | Kali Linux Documentation</title>
<meta itemprop=name content="Setting Uup a system for packaging | Kali Linux Documentation">
<meta name=application-name content="Setting Uup a system for packaging | Kali Linux Documentation">
<meta name=twitter:title content="Setting Uup a system for packaging | Kali Linux Documentation">
<meta property="og:site_name" content="Kali Linux">
<meta property="og:title" content="Setting Uup a system for packaging | Kali Linux Documentation">
<meta itemprop=description content="VM or install? In this walkthrough we will be explaining certain things that are only on a VM. It is your choice if you want to install a full Kali system (or if you already have one, if you want to use it) or if you want to use a VM, however keep in mind what commands you&rsquo;re entering if it is an install.">
<meta name=description content="VM or install? In this walkthrough we will be explaining certain things that are only on a VM. It is your choice if you want to install a full Kali system (or if you already have one, if you want to use it) or if you want to use a VM, however keep in mind what commands you&rsquo;re entering if it is an install.">
<meta name=twitter:description content="VM or install? In this walkthrough we will be explaining certain things that are only on a VM. It is your choice if you want to install a full Kali system (or if you already have one, if you want to use it) or if you want to use a VM, however keep in mind what commands you&rsquo;re entering if it is an install.">
<meta property="og:description" content="VM or install? In this walkthrough we will be explaining certain things that are only on a VM. It is your choice if you want to install a full Kali system (or if you already have one, if you want to use it) or if you want to use a VM, however keep in mind what commands you&rsquo;re entering if it is an install.">
<meta name=keywords content="kali,linux,kalilinux,Penetration,Testing,Penetration Testing,Distribution,Advanced">
<meta name=apple-mobile-web-app-status-bar-style content="black-translucent">
<meta name=msapplication-navbutton-color content="#367BF0">
<meta name=theme-color content="#367BF0">
<meta name=language content="English">
<meta property="og:locale" content="en_US">
<meta itemprop=image content="../../../images/kali-logo.svg">
<meta property="og:image" content="../../../images/kali-logo.svg">
<meta name=twitter:image content="../../../images/kali-logo.svg">
<meta name=twitter:image:src content="../../../images/kali-logo.svg">
<meta property="og:updated_time" content="2022-02-01T00:00:00Z">
<meta name=twitter:site content="@kalilinux">
<meta name=twitter:creator content="@kalilinux">
<link rel="alternate icon" class=js-site-favicon type=image/png href=../../../images/favicon.png>
<link rel=icon class=js-site-favicon type=image/svg+xml href=../../../images/favicon.svg>
<base 
<link rel=canonical href=index.html itemprop=url>
<meta name=twitter:url content="index.html">
<meta name=url content="index.html">
<meta property="og:url" content="index.html">
<link rel=sitemap type=application/xml title=Sitemap href=../../../sitemap.xml>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=alternate>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=feed>
<link href=../../../style.min.css rel=stylesheet>
<style>:root{--primary-color:#367BF0;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Noto Sans}body.dark-theme{--body-color:black;--text-color:#e1e1e1;--text-color-dark:white;--white-color:#121212;--light-color:#1A1A1A}</style>
<script>const $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document)</script>
</head>
<body>
<header>
<nav class=container>
<a id=logo href=../../../index.html style=background-image:url(../../../images/kali-logo.svg)></a>
<ul id=navigation>
<li>
<a href=../../../get-kali/index.html>Get Kali</a>
</li>
<li>
<a href=../../../blog/index.html>Blog</a>
</li>
<li class=dropdown-menu>
<span>Documentation <i class=ti-angle-down></i></span>
<div>
<a href=../../index.html>Kali Linux Documentation</a>
<a href=../../../tools/index.html>Kali Tools Documentation</a>
<a href="https://bugs.kali.org/search.php?project_id=1&amp;category_id[]=General%20Bug&amp;category_id[]=Kali%20Package%20Bug&amp;category_id[]=Kali%20Package%20Improvement&amp;status[]=30&amp;status[]=40&amp;status[]=50&amp;sticky=on&amp;sort=id%2Clast_updated&amp;dir=DESC%2CDESC&amp;hide_status=-2&amp;match_type=0">Known Issues</a>
</div>
</li>
<li class=dropdown-menu>
<span>Community <i class=ti-angle-down></i></span>
<div>
<a href=../../../community/index.html>Community Support</a>
<a href=https://forums.kali.org/>Kali Linux Forums</a>
<a href=ircs://irc.oftc.net:6697/#Kali-Linux>Real Time Chat</a>
<a href=../../../newsletter/index.html>Join Newsletter</a>
<a href=https://http.kali.org/README.mirrorlist>Mirror Location</a>
<a href=../../community/contribute/index.html>Get Involved</a>
</div>
</li>
<li class=dropdown-menu>
<span>Courses <i class=ti-angle-down></i></span>
<div>
<a href=https://portal.offensive-security.com/courses/pen-103>Kali Linux Revealed (KLCP/PEN-103)</a>
<a href=https://www.offensive-security.com/pwk-oscp/>PEN-200 (PWK/OSCP)</a>
<a href=https://www.offensive-security.com/wifu-oswp/>PEN-210 (WiFu/OSWP)</a>
<a href=https://www.offensive-security.com/pen300-osep/>PEN-300 (ETBD/OSEP)</a>
<a href=https://www.offensive-security.com/web200-oswa/>WEB-200 (WAWK/OSWA)</a>
<a href=https://www.offensive-security.com/awae-oswe/>WEB-300 (AWAE/OSWE)</a>
<a href=https://www.offensive-security.com/exp301-osed/>EXP-301 (WUMED/OSED)</a>
<a href=https://www.offensive-security.com/exp312-osmr/>EXP-312 (MCB/OSMR)</a>
<a href=https://www.offensive-security.com/awe-osee/>EXP-401 (AWE/OSEE)</a>
<a href=https://www.offensive-security.com/soc200-osda/>SOC-200 (AWE/OSDA)</a>
</div>
</li>
<li class=dropdown-menu>
<span>Developers <i class=ti-angle-down></i></span>
<div>
<a href=https://gitlab.com/kalilinux>Git Repositories</a>
<a href=https://pkg.kali.org/>Packages</a>
<a href=https://autopkgtest.kali.org/>Auto Package Test</a>
<a href=https://bugs.kali.org/>Bug Tracker</a>
<a href=https://stats.nethunter.com/>Kali NetHunter Stats</a>
</div>
</li>
<li class=dropdown-menu>
<span>About <i class=ti-angle-down></i></span>
<div>
<a href=../../../features/index.html>Kali Linux Overview</a>
<a href=https://gitlab.com/kalilinux/documentation/graphic-resources>Gallery & Press Pack</a>
<a href=../../../about-us/index.html>Meet The Kali Team</a>
<a href=../../../partnerships-sponsorships/index.html>Partnerships & Friends</a>
<a href=../../../contact/index.html>Contact Us</a>
</div>
</li>
</ul>
<button title="show menu">
<div></div>
<div></div>
<div></div>
</button>
</nav>
</header>
<main class=container>
<aside class=card>
<a href=../index.html title="↤ Go back"></a>
<ul>
<li>
<a href=../index.html>Kali Development</a>
<ul>
<li>
<a href=../contributing-runtime-tests/index.html>Contributing run-time tests with autopkgtest</a>
</li>
<li>
<a href=../custom-beaglebone-black-image/index.html>Custom Beaglebone Black Image</a>
</li>
<li>
<a href=../custom-chromebook-kernel-image/index.html>Custom Chromebook Image</a>
</li>
<li>
<a href=../custom-cubox-image/index.html>Custom CuBox Image</a>
</li>
<li>
<a href=../custom-efikamx-image/index.html>Custom EfikaMX Image</a>
</li>
<li>
<a href=../custom-kali-arm-ss808-image/index.html>Custom MK/SS808 Image</a>
</li>
<li>
<a href=../custom-odroid-kernel-image/index.html>Custom ODROID X2 U2 Image</a>
</li>
<li>
<a href=../custom-raspberry-pi-image/index.html>Custom Raspberry Pi Image</a>
</li>
<li class=active>
<a href=index.html>Setting Uup a system for packaging</a>
</li>
<li>
<a href=../intro-to-packaging-example/index.html>Introduction to packaging step-by-step example</a>
</li>
<li>
<a href=../intermediate-packaging-example/index.html>Intermediate packaging step-by-step example</a>
</li>
<li>
<a href=../advanced-packaging-example/index.html>Advanced Packaging Step-By-Step Example (FinalRecon & Python-icmplib)</a>
</li>
<li>
<a href=../leveraging-the-kali-bot/index.html>Getting the best out of the Kali Bot</a>
</li>
<li>
<a href=../generate-updated-kali-iso/index.html>Generate an Updated Kali ISO</a>
</li>
<li>
<a href=../live-build-a-custom-kali-iso/index.html>Creating A Custom Kali ISO</a>
</li>
<li>
<a href=../dojo-mastering-live-build/index.html>Building Custom Kali ISOs</a>
</li>
<li>
<a href=../rebuilding-a-package-from-source/index.html>Rebuilding a Source Package</a>
</li>
<li>
<a href=../recompiling-the-kali-linux-kernel/index.html>Recompiling the Kali Linux Kernel</a>
</li>
<li>
<a href=../kali-linux-arm-chroot/index.html>Preparing a Kali Linux ARM chroot</a>
</li>
<li>
<a href=../arm-cross-compilation-environment/index.html>ARM Cross-Compilation</a>
</li>
<li>
<a href=../packaging-apps-with-kaboxer/index.html>Packaging Applications with Kaboxer</a>
</li>
</ul>
</li>
</ul>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
</aside>
<section>
<article class=card>
<h2>Setting Uup a system for packaging</h2>
<div id=content><h4 id=vm-or-install>VM or install?</h4>
<p>In this walkthrough we will be explaining certain things that are only on a VM. It is your choice if you want to install a full Kali system (or if you already have one, if you want to use it) or if you want to use a VM, however keep in mind what commands you&rsquo;re entering if it is an install.</p>
<h4 id=setting-up-the-vm>Setting up the VM</h4>
<p>It&rsquo;s important to set up a development environment. The easiest way to go about this is to set up a VM with the <a href=https://cdimage.kali.org/kali-weekly/>latest Kali image</a> and give it a large filesystem. 80GB+ is good for a few packages at a time, however 150GB+ is recommended if <a href=https://gitlab.com/kalilinux/tools/packaging>you are using <code>mr</code></a> to download all packaging repositories. Likely, you will not need all of the packages to be downloaded.</p>
<h4 id=installing-packages>Installing packages</h4>
<p>We will install tools that we will use later for packaging. <a href=https://packages.debian.org/sid/packaging-dev><code>packaging-dev</code></a> is a metapackage, and will install many of the proper packages that are needed.</p>
<pre><code class=language-console>kali@kali:~$ sudo apt update
[...]
kali@kali:~$
kali@kali:~$ sudo apt install -y packaging-dev apt-file gitk mr
[...]
kali@kali:~$
</code></pre>
<h4 id=user-accounts-and-keys>User accounts and keys</h4>
<p>Packaging needs to be done on a non-root user with sudo privileges. <em>The default Kali user is suitable for this</em>.</p>
<p>you <strong>must</strong> log out of your account and switch to the new user <em>(rather than using <code>su</code>)</em>. This is done as some pieces (such as variables that are set) of the following setup require you to be on that account, <code>su</code> will not work.</p>
<p>Next, we should generate SSH and GPG keys. These are important for packaging as they will allow us to access our files on GitLab easily and ensure the work is ours. This step is not always necessary, however it is helpful in certain cases. You will know if you need to set up a GPG key, however we recommend setting up an SSH key as it will make the packaging process quicker.</p>
<pre><code class=language-console>kali@kali:~$ ssh-keygen -t rsa
[...]
kali@kali:~$
kali@kali:~$ gpg --gen-key
gpg (GnuPG) 1.4.12; Copyright (C) 2012 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

gpg: directory `/home/packaging/.gnupg' created
gpg: new configuration file `/home/packaging/.gnupg/gpg.conf' created
gpg: WARNING: options in `/home/packaging/.gnupg/gpg.conf' are not yet active during this run
gpg: keyring `/home/packaging/.gnupg/secring.gpg' created
gpg: keyring `/home/packaging/.gnupg/pubring.gpg' created
Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
 Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048)
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0)
Key does not expire at all
Is this correct? (y/N) y

You need a user ID to identify your key; the software constructs the user ID
from the Real Name, Comment and Email Address in this form:
    &quot;Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;&quot;

Real name: First Last
Email address: email@domain.com
Comment:
You selected this USER-ID:
     &quot;First Last &lt;email@domain.com&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O
You need a Passphrase to protect your secret key.

We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

Not enough random bytes available.  Please do some other work to give
the OS a chance to collect more entropy! (Need 284 more bytes)

gpg: /home/packaging/.gnupg/trustdb.gpg: trustdb created
gpg: key A123BC4D marked as ultimately trusted
public and secret key created and signed.

gpg: checking the trustdb
gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
pub   2048R/1234AB5C 2000-00-00
      Key fingerprint = 12AB 34C4 67DE F890 12G3  H45I 6789 J90K L123 MN4O
uid                  First Last &lt;email@domain.com&gt;
sub   2048R/12345A6B 2000-00-00
kali@kali:~$
</code></pre>
<p><strong>Please remember to change &ldquo;First Last <a href=mailto:email@domain.com>email@domain.com</a>&rdquo; to be your name and email</strong>.</p>
<p>The next step is to add the SSH key to your GitLab account. This can be done in the <a href=https://gitlab.com/profile/keys>keys section</a>. Run the commands below to put the key in the copy-paste buffer and paste it on GitLab&rsquo;s web page.</p>
<pre><code class=language-console>kali@kali:~$ sudo apt install -y xclip
[...]
kali@kali:~$
kali@kali:~$ cat ~/.ssh/id_rsa.pub | xclip
kali@kali:~$
</code></pre>
<h4 id=setting-up-files>Setting up files</h4>
<p>We now need to set up git-buildpackage/<a href=https://manpages.debian.org/testing/git-buildpackage/gbp-buildpackage.1.en.html><code>gbp buildpackage</code></a>.</p>
<pre><code class=language-console>kali@kali:~$ cat &lt;&lt;EOF&gt; ~/.gbp.conf
[DEFAULT]
pristine-tar = True
cleaner = /bin/true

[buildpackage]
sign-tags = True
export-dir = $HOME/kali/build-area/
ignore-branch = True
ignore-new = True

[import-orig]
filter-pristine-tar = True

[pq]
patch-numbers = False

[dch]
multimaint-merge = True
ignore-branch = True
EOF
kali@kali:~$
kali@kali:~$ grep -q DEBEMAIL ~/.bashrc \
  || echo export DEBEMAIL=email@domain.com &gt;&gt; ~/.bashrc
kali@kali:~$
</code></pre>
<p><strong>Be sure to replace <code>email@domain.com</code> with your email, and ensure it is the same one used with your GPG key, if that was setup</strong>.</p>
<p>We enable <code>pristine-tar</code> by default as we will use this tool to (efficiently) store a copy of the upstream tarball in the Git repository. We also set <code>export-dir</code> so that package builds happen outside of the git checkout directory.</p>
<p>Below, we&rsquo;re customizing some useful tools provided by the <code>devscripts</code> package.</p>
<pre><code class=language-console>kali@kali:~$ gpg -k

pub   rsa2048 2019-01-01 [SC] [expires: 2021-12-21]
      ABC123DE45678F90123G4567HIJK890LM12345N6
uid           [ultimate] First Last &lt;email@domain.com&gt;
sub   rsa2048 2019-01-01 [E] [expires: 2021-12-21]
kali@kali:~$
kali@kali:~$ cat &lt;&lt;EOF&gt; ~/.devscripts
DEBRELEASE_UPLOADER=dput
DEBRELEASE_DEBS_DIR=$HOME/kali/build-area/
DEBCHANGE_RELEASE_HEURISTIC=changelog
DEBCHANGE_MULTIMAINT_MERGE=yes
DEBCHANGE_PRESERVE=yes
DEBUILD_LINTIAN_OPTS=&quot;--color always -I&quot;
DEBCHANGE_AUTO_NMU=no
DEBSIGN_KEYID=ABC123DE45678F90123G4567HIJK890LM12345N6
EOF
kali@kali:~$
</code></pre>
<p><strong>Be sure to put your own key id in <code>DEBSIGN_KEYID</code>. In this example we can see from <code>gpg -k</code> that our key is <code>ABC123DE45678F90123G4567HIJK890LM12345N6</code></strong></p>
<p>You may also want to add the following to your git config.</p>
<pre><code class=language-console>kali@kali:~$ gpg -k

pub   2048R/A123BC4D 2012-12-07
uid                  First Last &lt;email@domain.com&gt;
sub   2048R/12345A6B 2012-12-07
kali@kali:~$
kali@kali:~$ git config --global user.name &quot;First Last&quot;
kali@kali:~$
kali@kali:~$ git config --global user.email email@domain.com
kali@kali:~$
kali@kali:~$ git config --global user.signingkey ABC123DE45678F90123G4567HIJK890LM12345N6
kali@kali:~$
kali@kali:~$ git config --global commit.gpgsign true
kali@kali:~$
</code></pre>
<p><strong>The <code>user.name</code> and <code>user.email</code> must match your gpg key details (<code>gpg -k</code>) or you will get a &ldquo;Secret Key Not Available&rdquo; error later on.</strong>
<strong>Be sure to put your own key id in <code>user.signingkey</code>. In this example we can see from <code>gpg -k</code> that our key is <code>ABC123DE45678F90123G4567HIJK890LM12345N6</code></strong></p>
<p>We also want to enable a dedicated git merge driver for the <code>debian/changelog</code> files.</p>
<pre><code class=language-console>kali@kali:~$ cat &lt;&lt;EOF &gt;&gt; ~/.gitconfig
[merge &quot;dpkg-mergechangelogs&quot;]
         name = debian/changelog merge driver
         driver = dpkg-mergechangelogs -m %O %A %B %A
EOF
kali@kali:~$
kali@kali:~$ mkdir -p ~/.config/git/
kali@kali:~$
kali@kali:~$ echo &quot;debian/changelog merge=dpkg-mergechangelogs&quot; &gt;&gt; ~/.config/git/attributes
kali@kali:~$
</code></pre>
<h4 id=sbuild>sbuild</h4>
<p>We also will need to set up sbuild. Although this isn&rsquo;t too difficult, it does require some extra setup.</p>
<pre><code class=language-console>kali@kali:~$ sudo mkdir -p /srv/chroots/
kali@kali:~$
kali@kali:~$ cd /srv/chroots/
kali@kali:/srv/chroots$ sudo sbuild-createchroot --keyring=/usr/share/keyrings/kali-archive-keyring.gpg --arch=amd64 --components=main,contrib,non-free --include=kali-archive-keyring kali-dev kali-dev-amd64-sbuild http://http.kali.org/kali
kali@kali:/srv/chroots$
</code></pre>
<p>Once that is done, we need to edit <code>/etc/schroot/chroot.d/kali-dev-amd64-sbuild*</code>, note that &ldquo;*&rdquo; is used as it will generate the last bit randomly. Alternatively, use TAB auto-completion.</p>
<pre><code class=language-console>kali@kali:~$ echo &quot;source-root-groups=root,sbuild&quot; | sudo tee -a /etc/schroot/chroot.d/kali-dev-amd64-sbuild*
kali@kali:~$
kali@kali:~$ cat /etc/schroot/chroot.d/kali-dev-amd64-sbuild*
[kali-dev-amd64-sbuild]
description=Debian kali-dev/amd64 autobuilder
groups=root,sbuild
root-groups=root,sbuild
profile=sbuild
type=directory
directory=/srv/chroots/kali-dev-amd64-sbuild
union-type=overlay
source-root-groups=root,sbuild
kali@kali:~$
</code></pre>
<p>Finally, we just need to add our user to the group and do one last change.</p>
<pre><code class=language-console>kali@kali:~$ sudo sbuild-adduser $USER
kali@kali:~$
kali@kali:~$ cat &lt;&lt;EOF&gt; ~/.sbuildrc
\$build_arch_all = 1;
\$build_source = 1;
\$run_lintian = 1;
\$lintian_opts = ['-I'];
EOF
kali@kali:~$
</code></pre>
<p><em>Reboot</em></p>
<h4 id=apt-cacher-ng>apt-cacher-ng</h4>
<p>When building a package with a sbuild, a lot of time (and bandwidth) is spent downloading the build dependencies. To speed up this step, it&rsquo;s possible to use a caching proxy, such as apt-cacher-ng.</p>
<pre><code class=language-console>kali@kali:~$ sudo apt install -y apt-cacher-ng
</code></pre>
<p>Check the version that was installed. If it&rsquo;s below <code>0.6.1-1</code>, Kali is not supported out of the box, and there&rsquo;s a little config to do.</p>
<pre><code class=language-console>kali@kali:~$ echo &quot;http://http.kali.org/kali/&quot; | sudo tee /etc/apt-cacher-ng/kali_mirrors
kali@kali:~$
kali@kali:~$ echo &quot;http://kali.download/kali/&quot; | sudo tee /etc/apt-cacher-ng/backends_kali
kali@kali:~$
kali@kali:~$ cat &lt;&lt;EOF | sudo tee /etc/apt-cacher-ng/kali.conf
# Repository remapping for Kali. See acng.conf and manual for details.
Remap-klxrep: file:kali_mirrors /kali ; file:backends_kali
EOF
kali@kali:~$
kali@kali:~$ sudo systemctl enable apt-cacher-ng --now
kali@kali:~$
</code></pre>
<p>In the snippet above, note that:</p>
<ul>
<li>The file <code>kali_mirrors</code> lists all the mirrors for which apt-cacher-ng will cache the requests. In this list, there should be at least the mirror that you used with the command <code>sbuild-createchroot</code> above.</li>
<li>The file <code>backends_kali</code> lists the mirror that apt-cacher-ng will actually use to download packages. You should set it to a mirror that is close to you.</li>
</ul>
<p>Finally, we just need to add a line of configuration inside our chroot, so that apt is configured to use the proxy.</p>
<pre><code class=language-console>kali@kali:~$ sudo sbuild-shell source:kali-dev-amd64-sbuild
I: /bin/sh
# echo 'Acquire::HTTP::Proxy &quot;http://localhost:3142&quot;;' &gt; /etc/apt/apt.conf.d/01proxy
# exit
kali@kali:~$
</code></pre>
<p>In order to make sure that everything works, there&rsquo;s a few things you can do:</p>
<ul>
<li>run <code>tail -f /var/log/apt-cacher-ng/apt-cacher.log</code> while you run build a package with sbuild.</li>
<li>check that the directory <code>/var/cache/apt-cacher-ng/klxrep/</code> is being populated with packages.</li>
</ul>
</div>
<hr>
<p id=post-meta>
Updated on: 2022-Feb-01<br>
Author:
<a href=https://gitlab.com/gamb1t rel=”nofollow” title="gamb1t's profile">gamb1t</a>
</p>
<hr>
<div id=pagination>
<a href=https://gitlab.com/kalilinux/documentation/kali-docs/edit/master/development/setting-up-packaging-system/index.md rel=noopener target=blank>
<i class=ti-pencil-alt></i>&nbsp;Edit this page
</a>
<div></div>
<a href=../index.html>
<i class=ti-arrow-left></i>
<span>Kali Development</span>
</a>
<a href=../intro-to-packaging-example/index.html>
<span>Introduction to packaging step-by-step example</span>
<i class=ti-arrow-right></i>
</a>
</div>
</article>
</section>
</main>
<script src=../../../plugins/highlight/highlight.pack.js></script>
<script>hljs.registerLanguage('shell',a=>({name:'Shell Session',aliases:['console','shellsession'],contains:[{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*$/},{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*/,starts:{end:/[^\\]$/,subLanguage:'bash'}},{className:'prompt',begin:/┌──\([^)]+\)-\[~?[/\w-]*\]\n└─[#$]/,starts:{end:/[^\\]$/,subLanguage:'bash'}}]})),hljs.highlightAll(),window.addEventListener('DOMContentLoaded',()=>$$('.hljs-prompt').forEach(a=>{let c='#2777ff',b='#5EBDAB';/#\s*$/.test(a.innerHTML)&&(c='#EC0101',b='#367BF0'),a.innerHTML=a.innerHTML.replace(/([^)]+)(:)(~?[/\w.-]*)([#$])/,`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="font-weight:bold;color:${b}">$3</span>`+`<span style="color:white;">$4</span>`),a.innerHTML=a.innerHTML.replace(/┌──\(([^)]+)\)-\[(~?[/\w.-]*)\]\n└─([#$])/,`<span style="color:${b}">┌──(</span>`+`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:${b}">)-[</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="color:${b}">]\n`+`└─</span><span style="color:${c};font-weight:bold">$3</span>`)}),!1)</script>
<footer>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
<div class=container>
<div>
<h4>Downloads</h4>
<a href=../../../get-kali/index.html rel=noopener target=_blank>Kali Linux</a>
<a href=../../../get-kali/index.html#kali-mobile rel=noopener target=_blank>Kali NetHunter</a>
<h4>Links</h4>
<a href=../../../index.html rel=noopener target=_blank>Home</a>
<a href=../../../blog/index.html rel=noopener target=_blank>Blog</a>
<a href=../../index.html rel=noopener target=_blank>Documentation</a>
<a href=../../../tools/index.html rel=noopener target=_blank>Tools</a>
<a href=https://forums.kali.org/ rel=noopener target=_blank>Support Forum</a>
<a href=https://bugs.kali.org/ rel=noopener target=_blank>Bug Tracker</a>
<a href=https://status.kali.org/ rel=noopener target=_blank>System Status</a>
</div>
<div>
<h4>Policies</h4>
<a href=../../policy/cookie/index.html>Cookie Policy</a>
<a href=../../policy/privacy/index.html>Privacy Policy</a>
<a href=../../policy/trademark/index.html>Trademark Policy</a>
<h4>Follow Us</h4>
<a href=https://twitter.com/kalilinux title=Twitter rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717.0-4.92 2.203-4.92 4.917.0.39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475.0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314.0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39.0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054.0 13.999-7.496 13.999-13.986.0-.209.0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
Twitter
</a>
<a href=https://www.facebook.com/kalilinux title=Facebook rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.9981 11.9991C23.9981 5.37216 18.626.0 11.9991.0 5.37216.0.0 5.37216.0 11.9991c0 5.9891 4.38789 10.9531 10.1242 11.8533V15.4676H7.07758V11.9991H10.1242V9.35553c0-3.00727 1.7914-4.66839 4.5322-4.66839 1.3128.0 2.686.23435 2.686.23435v2.9529h-1.513C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991h3.3279l-.532 3.4685H13.8739v8.3848C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991z"/></svg>
Facebook
</a>
<a href=https://gitlab.com/kalilinux title=GitLab rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.955 13.587l-1.342-4.135-2.664-8.189c-.135-.423-.73-.423-.867.0L16.418 9.45H7.582L4.919 1.263C4.783.84 4.185.84 4.05 1.26L1.386 9.449.044 13.587c-.121.375.014.789.331 1.023L12 23.054l11.625-8.443c.318-.235.453-.647.33-1.024"/></svg>
GitLab
</a>
<a href=https://github.com/kalilinux title=GitHub rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
GitHub
</a>
<a href=https://www.microsoft.com/en-us/p/kali-linux/9pkr34tncv07 title="Microsoft Store" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zm12.6.0H12.6V0H24v11.4z"/></svg>
Microsoft Store
</a>
<a href=https://hub.docker.com/u/kalilinux title=Docker rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M4.82 17.275c-.684.0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748.0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594.0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998.0H4.383v2.42h2.422V9.518l-.01.003zm3.03.0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03.0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045.0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
Docker
</a>
<a href=https://app.vagrantup.com/kalilinux title=Vagrant rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.672 6.774V4.917l3.164-1.822L3.56.005.397 1.852v2.263L7.52 21.41 12 23.995v-6.496l2.107-1.224-.024-.015 4.245-9.486V4.917l5.275-3.065L20.439.005l-5.272 3.087h-.003v2.11L12 12.584v2.467l-2.11 1.224zm3.164-3.66L8.814 3.1 5.672 4.917v1.857l4.218 9.501L12 15.234v-2.65L8.836 5.202zm9.492 1.803v1.857l-4.22 9.101L12 17.332v6.663l4.521-2.607L23.603 4.05V1.852z"/></svg>
Vagrant
</a>
<a href=https://aws.amazon.com/marketplace/pp/B08LL91KKB title="Amazon AWS" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183.0.08-.048.16-.152.24l-.503.335a.383.383.0 01-.208.072c-.08.0-.16-.04-.239-.112a2.47 2.47.0 01-.287-.375 6.18 6.18.0 01-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67.0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533.0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272.0.551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28.0-.568.031-.863.103s-.583.16-.862.272a2.287 2.287.0 01-.28.104.488.488.0 01-.127.023c-.112.0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597.0 01.224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84.0 011.246-.151c.95.0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263.0.534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66.0 00-.735-.136 6.02 6.02.0 00-.75-.048c-.535.0-.926.104-1.19.32-.263.215-.39.518-.39.917.0.375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144.0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398.0 01-.072-.32c0-.128.064-.2.191-.2h.783c.151.0.255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549.0 01.32-.08h.638c.152.0.256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52.0 01.311-.08h.743c.127.0.2.065.2.2.0.04-.009.08-.017.128a1.137 1.137.0 01-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51.0 01-.303.08h-.687c-.151.0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415.0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563.0 01-.048-.224v-.407c0-.167.064-.247.183-.247.048.0.096.008.144.024s.12.048.2.08c.271.12.566.215.878.279.319.064.63.096.95.096.502.0.894-.088 1.165-.264a.86.86.0 00.415-.758.777.777.0 00-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902.0 01-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175.0.359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69.0 01.24.2.43.43.0 01.071.263v.375c0 .168-.064.256-.184.256a.83.83.0 01-.303-.096 3.652 3.652.0 00-1.532-.311c-.455.0-.815.071-1.062.223-.248.152-.375.383-.375.71.0.224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117.0.343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zm1.509 3.88c-2.626 1.94-6.442 2.969-9.722 2.969-4.598.0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914.0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zm1.094-1.246c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z"/></svg>
Amazon AWS
</a>
<a href=https://azuremarketplace.microsoft.com/en/marketplace/apps/kali-linux.kali-linux title="Microsoft Azure" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.483 21.3H24L14.025 4.013l-3.038 8.347 5.836 6.938L5.483 21.3zM13.23 2.7 6.105 8.677.0 19.253h5.505v.014L13.23 2.7z"/></svg>
Microsoft Azure
</a>
<a href=../../../rss.xml title=RSS rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg>
RSS
</a>
</div>
<div><svg id="footer-logo" viewBox="0 0 135.47 135.47"><path fill="currentcolor" d="m71.766 36.352s-10.212-.6795-27.602 4.7619c-17.722 5.5452-27.773 13.405-27.773 13.405s26.414-14.748 56.228-15.586zm38.09 16.035 1.3276-.08664s-7.6062-9.2286-22.165-13.724c8.1839 3.3267 15.307 7.7345 20.837 13.81zm2.1727 3.8344c.20411-.3539.86302 1.1243 1.3634 1.7453.0212.124.0564.19967-.23373.13998-.0244-.12747-.0665-.16444-.0665-.16444s-.70029-.41667-.91499-.71224c-.21487-.29556-.253-.81255-.14825-1.0086zm17.867 43.93s1.6147-18.538-27.511-22.812c-3.6915-.54163-8.3599-.9585-13.082-.97044-23.344.30865-24.195-26.924-6.6044-28.299 7.2901-.60152 15.995 3.3311 24.505 7.2941-.0316 1.0569.0121 1.9961.70646 2.864.69414.86762 3.3607 1.8142 4.2128 2.3031.85203.48907 3.5816 2.2245 5.2543 4.4017.36275-.67854 3.3921-2.6504 3.3921-2.6504s-.72571.01579-2.414-.61519c-1.6885-.63098-3.6921-2.5401-3.7395-2.6504-.0473-.11052-.0788-.28401.31578-.36295.2996-.25224-.37893-1.0727-.67874-1.3723-.2996-.2998-2.3036-3.7073-2.3508-3.7863-.0473-.07894-.0632-.1577-.20507-.25243-.4419-.1421-2.3826.20506-2.3826.20506s-2.9847-1.4659-4.0135-4.6264c.015.55358-.5118 1.158.0 2.4298-1.5562-.65832-2.8929-1.7811-3.9472-4.5557-.62751 1.5781.0 2.5815.0 2.5815s-3.6646-1.024-4.2509-4.4036c-.6435 1.5171.0 2.4296.0 2.4296s-5.9742-3.1172-15.901-3.1624c-6.646-.60961-8.0296-12.301-7.4139-14.269.0.0-9.586-5.0521-28.456-7.2841-18.87-2.2322-34.346-.33638-34.346-.33638s33.421-1.6039 60.195 9.2356c.91018 4.0709 3.6482 10.851 5.1229 14.11-4.2197 2.9175-8.9781 5.6609-9.7191 15.391-.74074 9.7297 7.6245 18.288 17.998 18.552 9.8502.52469 16.656.59921 24.905 4.8759 7.8739 4.3537 14.33 17.62 14.969 29.551.69008-8.8524-2.632-27.889-18.134-33.669 21.667 3.7917 23.573 19.854 23.573 19.854zm-58.64-65.253-.77963-2.5147s-12.864-2.2844-30.16-1.055c-17.296 1.2294-34.759 7.2839-34.759 7.2839s35.732-8.991 65.698-3.7143"/></svg>
© OffSec Services Limited 2022. All rights reserved.
</div>
</div>
</footer>
<script src=../../../script.min.js></script>
</body>

<!-- Mirrored from www.kali.org/docs/development/setting-up-packaging-system/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 07:56:43 GMT -->
</html>