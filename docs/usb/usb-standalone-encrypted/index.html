<!doctype html><html lang=en-us>

<!-- Mirrored from www.kali.org/docs/usb/usb-standalone-encrypted/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 08:05:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head itemscope itemtype=https://www.kali.org/>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title itemprop=name>Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted | Kali Linux Documentation</title>
<meta itemprop=name content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted | Kali Linux Documentation">
<meta name=application-name content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted | Kali Linux Documentation">
<meta name=twitter:title content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted | Kali Linux Documentation">
<meta property="og:site_name" content="Kali Linux">
<meta property="og:title" content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted | Kali Linux Documentation">
<meta itemprop=description content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted These instructions allow you to create a fully encrypted standalone installation of Kali Linux 2021.4 on an external USB drive. By this, I mean an installation that
 is fully encrypted using luks, including encryption of the boot and swap partitions, runs on any 64bit Intel/AMD machine that can boot from a USB drive, either using EFI boot or legacy boot, does not involve any &ldquo;live&rdquo; system, i.">
<meta name=description content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted These instructions allow you to create a fully encrypted standalone installation of Kali Linux 2021.4 on an external USB drive. By this, I mean an installation that
 is fully encrypted using luks, including encryption of the boot and swap partitions, runs on any 64bit Intel/AMD machine that can boot from a USB drive, either using EFI boot or legacy boot, does not involve any &ldquo;live&rdquo; system, i.">
<meta name=twitter:description content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted These instructions allow you to create a fully encrypted standalone installation of Kali Linux 2021.4 on an external USB drive. By this, I mean an installation that
 is fully encrypted using luks, including encryption of the boot and swap partitions, runs on any 64bit Intel/AMD machine that can boot from a USB drive, either using EFI boot or legacy boot, does not involve any &ldquo;live&rdquo; system, i.">
<meta property="og:description" content="Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted These instructions allow you to create a fully encrypted standalone installation of Kali Linux 2021.4 on an external USB drive. By this, I mean an installation that
 is fully encrypted using luks, including encryption of the boot and swap partitions, runs on any 64bit Intel/AMD machine that can boot from a USB drive, either using EFI boot or legacy boot, does not involve any &ldquo;live&rdquo; system, i.">
<meta name=keywords content="kali,linux,kalilinux,Penetration,Testing,Penetration Testing,Distribution,Advanced">
<meta name=apple-mobile-web-app-status-bar-style content="black-translucent">
<meta name=msapplication-navbutton-color content="#367BF0">
<meta name=theme-color content="#367BF0">
<meta name=language content="English">
<meta property="og:locale" content="en_US">
<meta itemprop=image content="../../../images/kali-logo.svg">
<meta property="og:image" content="../../../images/kali-logo.svg">
<meta name=twitter:image content="../../../images/kali-logo.svg">
<meta name=twitter:image:src content="../../../images/kali-logo.svg">
<meta property="og:updated_time" content="2022-01-24T00:00:00Z">
<meta name=twitter:site content="@kalilinux">
<meta name=twitter:creator content="@kalilinux">
<link rel="alternate icon" class=js-site-favicon type=image/png href=../../../images/favicon.png>
<link rel=icon class=js-site-favicon type=image/svg+xml href=../../../images/favicon.svg>
<base 
<link rel=canonical href=index.html itemprop=url>
<meta name=twitter:url content="index.html">
<meta name=url content="index.html">
<meta property="og:url" content="index.html">
<link rel=sitemap type=application/xml title=Sitemap href=../../../sitemap.xml>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=alternate>
<link href=../../../rss.xml type=application/rss+xml title="Kali Linux" rel=feed>
<link href=../../../style.min.css rel=stylesheet>
<style>:root{--primary-color:#367BF0;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Noto Sans}body.dark-theme{--body-color:black;--text-color:#e1e1e1;--text-color-dark:white;--white-color:#121212;--light-color:#1A1A1A}</style>
<script>const $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document)</script>
</head>
<body>
<header>
<nav class=container>
<a id=logo href=../../../index.html style=background-image:url(../../../images/kali-logo.svg)></a>
<ul id=navigation>
<li>
<a href=../../../get-kali/index.html>Get Kali</a>
</li>
<li>
<a href=../../../blog/index.html>Blog</a>
</li>
<li class=dropdown-menu>
<span>Documentation <i class=ti-angle-down></i></span>
<div>
<a href=../../index.html>Kali Linux Documentation</a>
<a href=../../../tools/index.html>Kali Tools Documentation</a>
<a href="https://bugs.kali.org/search.php?project_id=1&amp;category_id[]=General%20Bug&amp;category_id[]=Kali%20Package%20Bug&amp;category_id[]=Kali%20Package%20Improvement&amp;status[]=30&amp;status[]=40&amp;status[]=50&amp;sticky=on&amp;sort=id%2Clast_updated&amp;dir=DESC%2CDESC&amp;hide_status=-2&amp;match_type=0">Known Issues</a>
</div>
</li>
<li class=dropdown-menu>
<span>Community <i class=ti-angle-down></i></span>
<div>
<a href=../../../community/index.html>Community Support</a>
<a href=https://forums.kali.org/>Kali Linux Forums</a>
<a href=ircs://irc.oftc.net:6697/#Kali-Linux>Real Time Chat</a>
<a href=../../../newsletter/index.html>Join Newsletter</a>
<a href=https://http.kali.org/README.mirrorlist>Mirror Location</a>
<a href=../../community/contribute/index.html>Get Involved</a>
</div>
</li>
<li class=dropdown-menu>
<span>Courses <i class=ti-angle-down></i></span>
<div>
<a href=https://portal.offensive-security.com/courses/pen-103>Kali Linux Revealed (KLCP/PEN-103)</a>
<a href=https://www.offensive-security.com/pwk-oscp/>PEN-200 (PWK/OSCP)</a>
<a href=https://www.offensive-security.com/wifu-oswp/>PEN-210 (WiFu/OSWP)</a>
<a href=https://www.offensive-security.com/pen300-osep/>PEN-300 (ETBD/OSEP)</a>
<a href=https://www.offensive-security.com/web200-oswa/>WEB-200 (WAWK/OSWA)</a>
<a href=https://www.offensive-security.com/awae-oswe/>WEB-300 (AWAE/OSWE)</a>
<a href=https://www.offensive-security.com/exp301-osed/>EXP-301 (WUMED/OSED)</a>
<a href=https://www.offensive-security.com/exp312-osmr/>EXP-312 (MCB/OSMR)</a>
<a href=https://www.offensive-security.com/awe-osee/>EXP-401 (AWE/OSEE)</a>
<a href=https://www.offensive-security.com/soc200-osda/>SOC-200 (AWE/OSDA)</a>
</div>
</li>
<li class=dropdown-menu>
<span>Developers <i class=ti-angle-down></i></span>
<div>
<a href=https://gitlab.com/kalilinux>Git Repositories</a>
<a href=https://pkg.kali.org/>Packages</a>
<a href=https://autopkgtest.kali.org/>Auto Package Test</a>
<a href=https://bugs.kali.org/>Bug Tracker</a>
<a href=https://stats.nethunter.com/>Kali NetHunter Stats</a>
</div>
</li>
<li class=dropdown-menu>
<span>About <i class=ti-angle-down></i></span>
<div>
<a href=../../../features/index.html>Kali Linux Overview</a>
<a href=https://gitlab.com/kalilinux/documentation/graphic-resources>Gallery & Press Pack</a>
<a href=../../../about-us/index.html>Meet The Kali Team</a>
<a href=../../../partnerships-sponsorships/index.html>Partnerships & Friends</a>
<a href=../../../contact/index.html>Contact Us</a>
</div>
</li>
</ul>
<button title="show menu">
<div></div>
<div></div>
<div></div>
</button>
</nav>
</header>
<main class=container>
<aside class=card>
<a href=../index.html title="↤ Go back"></a>
<ul>
<li>
<a href=../index.html>USB</a>
<ul>
<li>
<a href=../live-usb-install-with-linux/index.html>Making a Kali Bootable USB Drive (Linux)</a>
</li>
<li>
<a href=../live-usb-install-with-mac/index.html>Making a Kali Bootable USB Drive (macOS/OS X)</a>
</li>
<li>
<a href=../live-usb-install-with-windows/index.html>Making a Kali Bootable USB Drive on Windows</a>
</li>
<li class=active>
<a href=index.html>Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted</a>
</li>
<li>
<a href=../updating-kali-on-usb/index.html>Updating Kali Linux on USB</a>
</li>
<li>
<a href=../usb-persistence/index.html>Adding Persistence to a Kali Linux Live USB Drive</a>
</li>
<li>
<a href=../usb-persistence-encryption/index.html>Adding Encrypted Persistence to a Kali Linux Live USB Drive</a>
</li>
<li>
<a href=../boot-usb-in-a-vm/index.html>USB Boot in a VM</a>
</li>
</ul>
</li>
</ul>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
</aside>
<section>
<article class=card>
<h2>Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted</h2>
<div id=content><h1 id=standalone-kali-linux-20214-installation-on-a-usb-drive-fully-encrypted>Standalone Kali Linux 2021.4 Installation on a USB Drive, Fully Encrypted</h1>
<p>These instructions allow you to create a fully encrypted standalone installation of Kali Linux 2021.4 on an external USB drive. By this, I mean an installation that</p>
<ul>
<li>is fully encrypted using luks, including encryption of the boot and swap partitions,</li>
<li>runs on any 64bit Intel/AMD machine that can boot from a USB drive, either using EFI boot or legacy boot,</li>
<li>does not involve any &ldquo;live&rdquo; system, i.e. the system that boots from the USB drive does not need to <code>chroot</code> to a RAM disk; the present Kali installation runs on the external drive as it would do on an internal disk; in particular, you can install further packages with <code>apt-get install &lt;something></code>, you can edit configuration files, and all these changes are permanent even if you boot from this USB drive on a different machine the next time; you can also compile a custom kernel and install it on the USB drive.</li>
</ul>
<p>Use cases are, for example, a tailored bootable Kali 2021.4 installation to be used as a repair, forensic or maintenance tool. If you wish to probe a network from the point of view of a specific machine, you usually need to reconfigure some switches to provide port mirroring and divert all traffic to a segment from where you can probe the it. Now there is an alternative. Simply reboot the relevant machine from your USB Kali installation, connect it to the network, and there you are, right with the usual hardware and the usual MAC address, but this time running Kali.</p>
<p>Also, if your main computer runs Windows or some other flavour of Linux, and you just occasionally require Kali, then you can avoid a dual-boot setup. Whenever you need Kali, simply boot from the USB drive, but otherwise leave your existing installation alone.</p>
<p>Of course, you use the subsequent instructions only if you know exactly what you are doing. You can easily make the harddisks of the machine on which you work, unreadable and thereby lose all your data.</p>
<h2 id=outline>Outline</h2>
<p>Creating such an installation is a bit tricky and involves quite a bit of manual intervention:</p>
<ul>
<li>First, we partition our USB drive using an existing Linux installation, and we set up a number of partitions, some of which will be encrypted:
<ol>
<li>A <code>/boot</code> partition with <code>ext4</code> file system encrypted with luks, version 1. Fortunately, the boot loader <code>grub2</code> can mount luks1 encrypted partitions and boot from them.</li>
<li>A boot sector for <code>grub2</code> to reside in.</li>
<li>An EFI partition with <code>vfat</code> filesystem.</li>
<li>A <code>swap</code> partition, encrypted with luks2.</li>
<li>The root (<code>/</code>) partition of our installation with <code>btrfs</code> filesystem. Any more fine grained structure is achived by creating subvolumes.</li>
</ol>
</li>
<li>We also need a USB drive with the Kali &ldquo;bare metal&rdquo; installer. This is a Debian type installer. We need to interrupt the expert mode installation and intervene from the command line in order to mount the encrypted partitions of our target USB drive, then install Kali Linux 2021.4 on it, create an initial RAM disk on the <code>/boot</code> partition which contains the keys for <code>grub2</code> in order to eventually be able to mount the encrypted partitions, but we must not install the <code>grub2</code> boot loader at this stage. If we did, this might change the EFI boot information of the machine on which we are performing the installation and produce an unintended dual-boot setup, and so we are left with a complete installation that is merely lacking any boot loader.</li>
<li>We then need a USB drive with a rescue system. I have not managed to do this with the Kali &ldquo;bare metal&rdquo; installer, but rather employ the &ldquo;Xubuntu 20.04 LTS&rdquo; live USB medium. With its help, we can install <code>grub2</code> in <code>--removable</code> mode. This prevents <code>grub2</code> from modifying the EFI boot information of the machine on which we are working, but rather affects only our target USB drive.</li>
</ul>
<h2 id=preparation>Preparation</h2>
<h3 id=kali-linux-20214-bare-metal-installer>Kali Linux 2021.4 Bare Metal Installer</h3>
<p>First, we obtain the ISO image of the <a href=../../../get-kali/index.html#kali-bare-metal>Kali Linux 2021.4 Bare Metal Installer</a>. In my case, the ISO image file is called <code>kali-linux-2021.4-installer-amd64.iso</code>. We work on an existing Linux machine. In my case, this is an Ubuntu 20.04 LTS.</p>
<p>We insert a blank USB pen drive of at least 4GB and copy the image onto that pen drive as follows. Once we plug in the USB pen drive, we need to find out which block device it corresponds to. Usually this will be <code>/dev/sdx</code> where <code>x</code>is a one of the letters <code>a</code>, <code>b</code>, and so on. If our Linux distribution auto-mounts the USB pen drive, <code>df</code>, <code>mount</code> or <code>lsblk</code> will reveal the device file it is associated with. Then make sure the drive is unmounted before you proceed (e.g. <code>sudo umount /dev/sdxn</code> where <code>n</code> stands for the numbers of all partitions of the drive that have been auto-mounted).
If the drive is not auto-mounted, <code>ls /dev</code> before and after plugging it in should reveal the device file name.</p>
<p>On my Xubuntu 20.04 LTS machine, the first USB pen drive is associated with <code>/dev/sda</code>, and so in order to copy the ISO image to the pen drive,</p>
<pre><code>sudo dd if=kali-linux-2021.4-installer-amd64.iso of=/dev/sda status=progress
</code></pre>
<p>(Note that on Ubuntu like systems, rather than working under the <code>root</code> user, you can issue commands with root privileges by calling them via <code>sudo</code>)</p>
<h3 id=xubuntu-2004-lts-installer>Xubuntu 20.04 LTS Installer</h3>
<p>We also need the ISO image of the <a href=https://xubuntu.org/download>Xubuntu 20.04 LTS Live Installer</a> on a second USB pen drive. In my case, the ISO image file is called <code>xubuntu-20.04-desktop-amd64.iso</code>. In the same fashion, this goes to a second USB pen drive (at least 4GB in size). Unplug the first USB pen drive and plug in the second one.</p>
<pre><code>sudo dd if=xubuntu-20.04-desktop-amd64.iso of=/dev/sda status=progress
</code></pre>
<h3 id=partitioning-the-target-usb-drive>Partitioning the Target USB Drive</h3>
<p>Finally, we insert the USB drive on which we wish to perform the Kali Linux 2021.4 installation. I use a 128GB NVMe M.2 SSD in an USB 3.1 gen 2 enclosure for this purpose. Disconnect the second pen drive and connect the target USB drive. Similarly to the above, find out which device <code>/dev/sdx</code> the target USB drive corresponds to and make sure that none of its partitions are mounted. In my case, the target USB drive is again associated with <code>/dev/sda</code>.</p>
<p>We then use <code>sudo gdisk /dev/sda</code> in order to create the following partitions.</p>
<pre><code>/dev/sda1,   4.0 GiB, type 8301, Linux reserved, will become /boot
/dev/sda2,   2.0 MiB, type ef02, BIOS boot, will contain grub2
/dev/sda3, 128.0 MiB, type ef00, EFI system partition
/dev/sda4,   8.0 GiB, type 8200, Linux swap
/dev/sda5,  &lt;something big&gt;, type 8300, Linux filesystem, will be the main partition
</code></pre>
<p>Here, I have allocated 8GB for swap which is sufficient for my purposes. Note that you will not be able to hibernate (suspend to disk) if this partition is too small. If you wish to connect your Kali Linux USB drive to different machines, you should probably forget about hibernation because your system would most likely not properly wake up on hardware different from where you put it to sleep.</p>
<p>The main partition can be as big as you like. If you require additional partitions, you can treat them all precisely as we treat <code>/dev/sda5</code> in the present notes.</p>
<p>Rather than using <code>gdisk</code>, we can alternatively repartition the target USB drive from the command line:</p>
<pre><code>sgdisk --zap-all /dev/sda
sgdisk --new=1:0:+4096M /dev/sda
sgdisk --new=2:0:+2M /dev/sda
sgdisk --new=3:0:+128M /dev/sda
sgdisk --new=4:0:+8192M /dev/sda
sgdisk --new=5:0:0 /dev/sda
sgdisk --typecode=1:8301 --typecode=2:ef02 --typecode=3:ef00 --typecode=4:8200 --typecode=5:8300 /dev/sda
sgdisk --change-name=1:/boot --change-name=2:GRUB --change-name=3:EFI-SP 00change-name=4:swap --change-name=5:rootfs /dev/sda
sgdisk --hybrid 1:2:3 /dev/sda
sgdisk --print /dev/sda
</code></pre>
<p>(Note that the size hint <code>:0</code> for partition 5 indicates that we request all the remaining free space)</p>
<p>Next, we set up luks encryption for the partitions 1,4 and 5. Note that the boot loader <code>grub2</code> can mount only luks, version 1.</p>
<pre><code>sudo cryptsetup luksFormat --type=luks1 /dev/sda1
sudo cryptsetup luksFormat /dev/sda4
sudo cryptsetup luksFormat /dev/sda5
</code></pre>
<p>Since the keys to unlock partitions 4 and 5 will be placed in the initial RAM disk on the <code>/boot</code> partition, we can set the same passphrase for all three partitions. Using different phrases would not increase security. We now unlock the three partitions,</p>
<pre><code>sudo cryptsetup open /dev/sda1 LUKS_BOOT
sudo cryptsetup open /dev/sda4 LUKS_SWAP
sudo cryptsetup open /dev/sda5 LUKS_ROOT
</code></pre>
<p>The command <code>ls /dev/mapper</code> then shows the three devices associated with the unlocked partitions. We can now format the partitions 1,3,4 and 5, aka create filesystems on them.</p>
<pre><code>sudo mkfs.ext4 -L boot /dev/mapper/LUKS_BOOT
sudo mkfs.vfat -F 16 -n EFI-SP /dev/sda3
sudo mkswap -L swap /dev/mapper/LUKS_SWAP
sudo mkfs.btrfs -L root /dev/mapper/LUKS_ROOT
</code></pre>
<p>Finally, we remove the mapped devices (and our machine forgets how to decrypt the partitions):</p>
<pre><code>sudo cryptsetup close LUKS_BOOT
sudo cryptsetup close LUKS_SWAP
sudo cryptsetup close LUKS_ROOT
</code></pre>
<h2 id=installation-of-kali-linux-20214>Installation of Kali Linux 2021.4</h2>
<h3 id=setting-up-the-installer>Setting Up the Installer</h3>
<p>Now setup the BIOS of your computer to boot from a USB drive. If we boot in EFI mode, we will eventually obtain a USB drive that boots only in EFI mode. If we boot in legacy BIOS mode, we will eventually produce a USB drive that boots both in legacy and in EFI mode.</p>
<p>Plug in the USB pen drive with the Kali 2021.4 installer and boot the machine. Note that we will require network access during installation.</p>
<p>Chose <em>Advanced Options</em> and <em>Graphical Expert Install</em>. Execute the following items of the installation menu (but none other than these):</p>
<ul>
<li><em>Choose language</em></li>
<li><em>Configure the keyboard</em></li>
<li><em>Detect and mount installation medium</em></li>
<li><em>Load debconf preconfiguration file</em></li>
<li><em>Load installer components from installation medium</em>, select <code>crypto-dm-modules</code>, <code>fdisk-udeb</code>, <code>mbr-udeb</code>, <code>parted-udeb</code>, <code>rescue-mode</code>.</li>
<li><em>Detect network hardware</em></li>
<li><em>Configure the network</em>, make sure that you have network access at this stage.</li>
<li><em>Set up users and passwords</em>, select <em>shadow passwords</em> and setup the main user that will be able to get root privileges via <code>sudo</code>.</li>
<li><em>Configure the clock</em>, note that when you choose <em>ntp</em> (the network time protocol), your machine will start polling once connected to a network which is perhaps undesirable for your installation</li>
</ul>
<p>Do not execute <em>Detect disks</em>. Rather press [Ctrl]+[Alt]+[F3] and then [Enter] in order to open a text console with root privileges. Now Connect the target USB drive on which we will install Kali Linux 2021.4. Use <code>ls /dev</code> before and after connecting in order to discover which device files it is associated with. In my case, the USB pen drive from which I have booted, is <code>/dev/sda</code>, and the target USB drive becomes <code>/dev/sdb</code>.</p>
<p>We unlock the three encrypted partitions:</p>
<pre><code>cryptsetup open /dev/sdb1 LUKS_BOOT
cryptsetup open /dev/sdb4 LUKS_SWAP
cryptsetup open /dev/sdb5 LUKS_ROOT
</code></pre>
<h3 id=partitioning>Partitioning</h3>
<p>Now press [Ctrl]+[Alt]+[F5] and continue with the installation in graphical mode as follows.</p>
<ul>
<li><em>Detect disks</em></li>
<li><em>Partition disks</em>, manual.</li>
</ul>
<p>Place the cursor on the line <code>4.3 GB ...</code> below <code>LUKS_BOOT</code>, press [Enter], use as <code>Ext4</code>, format, mount at <code>/boot</code>, options <code>noatime</code>, and select <em>Done setting up the partition</em>.
Place the cursor on the line below <code>LUKS_ROOT</code>, press [Enter], use as <code>btrfs</code>, format, mount at <code>/</code>, options <code>noatime</code>, and select <em>Done setting up the partition</em>.
The partition <code>LUKS_SWAP</code> has already been recognized and marked as <code>swap</code>.</p>
<p>Select on <em>Finish partitioning and write changes to disk</em>.</p>
<p>Then we press [Ctrl]+[Alt]+[F3] in order to get to the root console again.</p>
<p>Calling <code>df</code> shows that the two non-swap encrypted partitions have been mounted at <code>/target</code> and <code>/target/boot</code>, respectively. If the machine was booted in EFI mode, there is also <code>/target/boot/efi</code>, but the wrong one, pointing to the EFI partition of the first internal harddisk. It rather ought to be the EFI partition on the target USB drive. See below for more details.</p>
<h3 id=btrfs-adjustments>Btrfs Adjustments</h3>
<p>The debian installer has created the subvolume <code>@rootfs</code> on the <code>btrfs</code> partition. We mount the top level subvolume,
create further subvolumes, <code>@</code> for the default subvolume, <code>@home</code>, <code>@root</code>, <code>@snapshots</code> and <code>@var</code>, and we set <code>@</code> to be the default:</p>
<pre><code>mkdir /mnt/point
mount -o subvol=/ /dev/mapper/LUKS_ROOT /mnt/point
cd /mnt/point
btrfs subvolume create @
btrfs subvolume create @home
btrfs subvolume create @root
btrfs subvolume create @snapshots
btrfs subvolume list .
btrfs subvolume set-default 257 . # where 257 is the subvolume ID that was displayed for @
cd /
umount /mnt/point
umount /target/boot/efi # only required when booted in EFI mode
umount /target/boot
umount /target
mount -o subvol=@ /dev/mapper/LUKS_ROOT /target
mkdir /target/boot
mkdir /target/etc
mkdir /target/media
mkdir /target/snapshots
mount /dev/mapper/LUKS_BOOT /target/boot
mount -o subvol=@rootfs /dev/mapper/LUKS_ROOT /mnt/point
cp /mnt/point/etc/fstab /target/etc/fstab
</code></pre>
<p>Here, the <code>btrfs subvolume list</code> shows the subvolume IDs on the current volume, and we use the number assigned to <code>@</code> in the subsequent <code>set-default</code> command.</p>
<p>We have created the subvolume <code>@</code> as the one to be mounted on <code>/</code> by default, follwing <code>snapper</code> naming conventions. It is a matter of taste how many further subvolumes to create. We go for <code>@home</code>, <code>@root</code> and <code>@snapshots</code> which we will later mount at <code>/home</code>, <code>/root</code> and <code>/snapshots</code>. Note that although some like <code>/var</code> on a seperate subvolume, this will not work below.</p>
<h3 id=the-file-system-table>The File System Table</h3>
<p>The <code>umount /target/boot/efi</code> is required only when the installation medium was booted in EFI mode. The key point here is that even though we are installing to a USB drive, the EFI partition mounted so far is the EFI partition of the internal harddisk of the computer. This wrong mount would cause serious trouble later when we install a boot loader.</p>
<p>Then we call <code>blkid -s PARTUUID -o value /dev/sdb3</code> in order to find out the UUID of the EFI partition on the target USB drive and write it down on paper. We call <code>nano /target/etc/fstab</code> in order to adapt the file system table as follows.</p>
<p>Firstly, in the line for <code>/</code>, we change <code>subvol=@rootfs</code> to <code>subvol=@</code>. We also add a line</p>
<pre><code>PARTUUID=&lt;whatever&gt; /boot/efi vfat umask=0077 0 1
</code></pre>
<p>with the UUID we just wrote down. This allows the installation to locate and mount the correct EFI partition irrespectively of any device number. Then we add lines in order to mount the <code>btrfs</code> subvolumes we just created. I have also added mount options that are useful for working with SSDs. In my case, the other lines thus read as follows.</p>
<pre><code>/dev/mapper/LUKS_ROOT /               btrfs   defaults,noatime,ssd,compress=lzo,subvol=@              0 0
/dev/mapper/LUKS_BOOT /boot           ext4    defaults,noatime                                                    0 1
/dev/mapper/LUKS_ROOT /home           btrfs   defaults,noatime,ssd,compress=lzo,subvol=@home      0 2
/dev/mapper/LUKS_ROOT /root           btrfs   defaults,noatime,ssd,compress=lzo,subvol=@root      0 3
/dev/mapper/LUKS_ROOT /snapshots      btrfs   defaults,noatime,ssd,compress=lzo,subvol=@snapshots 0 4
/dev/mapper/LUKS_SWAP none            swap    sw                                                                          0 0
</code></pre>
<p>(in which only one line says <code>LUKS_BOOT</code> instead of <code>LUKS_ROOT</code>). In the editor <code>nano</code>, we press [Ctrl]+[o] in order to save the file, confirm with [Enter] and then [Ctrl]+[x] to quit the editor. Now we remove the top level subvolume and mount the correct EFI partition in the appropriate place:</p>
<pre><code>umount /mnt/point
mkdir /target/boot/efi
mount /dev/sdb3 /target/boot/efi
mount -o subvol=@home /dev/mapper/LUKS_ROOT /target/home
mount -o subvol=@root /dev/mapper/LUKS_ROOT /target/root
</code></pre>
<p>If you have created further btrfs subvolumes that might be affected by the installation, mount them here as well.</p>
<h3 id=actual-installation>Actual Installation</h3>
<p>Again, [Ctrl]+[Alt]+[F5] gets us to the graphical screen, and we continue the installation as follows.</p>
<ul>
<li><em>Install the base system</em>, select the kernel <em>linux-image-5.14.0-kali4-amd64</em>, <em>generic initrd</em>.</li>
<li><em>Configure the package manager</em>.</li>
<li><em>Select and install software</em>, we keep the defaults.</li>
</ul>
<p>But then, do <em>not</em> install a boot loader, but rather</p>
<ul>
<li><em>Continue without boot loader</em></li>
</ul>
<p>Some people who tried to install Linux on a portable drive report that the installation nevertheless modified the boot sectors of the internal harddisk of the machine they were working on. I suspect by mounting the correct partition at <code>/target/boot/efi</code> above, we would have avoided this. Nevertheless we cannot use the installation of <code>grub2</code> that the installer would perform because it would lack the <code>--removable</code> flag. We therefore postpone the installation of the boot loader to a later stage.</p>
<h3 id=setting-up-the-initial-ram-disk>Setting Up the Initial RAM Disk</h3>
<p>Then back to the root console with [Ctrl]+[Alt]+[F3] in order to make sure that <code>grub2</code>, when it is evetually installed, will be able to decrypt the boot partition.</p>
<p>We change root to the newly installed system, mount all partitions and subvolumes,</p>
<pre><code>for n in dev proc sys run etc/resolv.conf; do mount --bind /$n /target/$n; done
chroot /target
mount -a
</code></pre>
<p>If the <code>mount -a</code> reports errors, this might be due to typos in the file system table we modified above.</p>
<p>The <code>/etc/resolv.conf</code> is there in order not to lose the DNS information that the installer obtained when we set up the network. On the target system, we install all tools in order to install and update <code>grub2</code> as well as to add decryption tools to the initial RAM disk:</p>
<pre><code>apt-get install grub-common grub-efi-amd64 os-prober
apt-get install cryptsetup-initramfs
</code></pre>
<p>In the following, we create a random luks key file which is able to unlock the three encrypted partitions and set up a few configuration files before the initial RAM disk is composed.</p>
<pre><code>echo &quot;KEYFILE_PATTERN=/etc/luks/*.keyfile&quot; &gt;&gt;/etc/cryptsetup-initramfs/conf-hook
echo &quot;UMASK=0077&quot; &gt;&gt;/etc/initramfs-tools/initramfs.conf
mkdir /etc/luks
dd if=/dev/urandom of=/etc/luks/boot_os.keyfile bs=4096 count=1
chmod u=rx,go-rwx /etc/luks
chmod u=r,go-rwx /etc/luks/boot_os.keyfile
cryptsetup luksAddKey /dev/sdb1 /etc/luks/boot_os.keyfile
cryptsetup luksAddKey /dev/sdb4 /etc/luks/boot_os.keyfile
cryptsetup luksAddKey /dev/sdb5 /etc/luks/boot_os.keyfile
echo &quot;LUKS_BOOT UUID=$(blkid -s UUID -o value /dev/sdb1) /etc/luks/boot_os.keyfile luks,discard&quot; &gt;&gt;/etc/crypttab
echo &quot;LUKS_SWAP UUID=$(blkid -s UUID -o value /dev/sdb4) /etc/luks/boot_os.keyfile luks,discard&quot; &gt;&gt;/etc/crypttab
echo &quot;LUKS_ROOT UUID=$(blkid -s UUID -o value /dev/sdb5) /etc/luks/boot_os.keyfile luks,discard&quot; &gt;&gt;/etc/crypttab
/usr/sbin/update-initramfs -u -k all
</code></pre>
<p>During the boot process, <code>grub2</code> will detect that there is an encrypted <code>/boot</code> partition. It will ask for a passphrase (the one that we associated with <code>/boot</code> right in the beginning). The <code>/boot</code> partition then contains a kernel with initial RAM disk that contains the key file we just created and which can be used to unlock all our encrypted partitions.</p>
<p>Cryptographically, the weakest link is the passphrase protection of the <code>/boot</code> partition. Should that be broken, the other partitions are compromised, too. And note that this is merely version luks1.</p>
<h3 id=finishing-the-installation>Finishing the Installation</h3>
<p>Finally, we press [Ctrl]+[Alt]+[F5] go back to the graphical installer and</p>
<ul>
<li><em>Finish the installation</em> with system clock set to UTC.</li>
</ul>
<p>Eventually, we click <em>Continue</em> to boot the system, but we rather remove the USB pen drive and the USB installation target and turn off the computer.</p>
<h2 id=creation-of-a-boot-loader>Creation of a Boot Loader</h2>
<p>Note that in order to produce an EFI bootable USB drive, when we next boot the computer, this has to be in UEFI mode. If required, go to the BIOS/UEFI Setup and switch it on.</p>
<p>Now we connect the USB pen drive that contains the Xubuntu 20.04.3 LTS live installation medium and boot from it, select <em>Try
Xubuntu wihout installing</em> in order to get to the live system. Then we connect the USB drive that forms our installation target.</p>
<p>Make sure that the Xubuntu live system has network access (this is done by the <code>NetworkManager</code> in the graphical interface). Open a terminal and call <code>ls /sys/firmware/efi/efivars</code> in order to confirm that we are indeed in EFI mode. If this directory were missing, we would be in legacy BIOS boot mode.</p>
<p>Again use <code>ls /dev</code> and <code>df</code> in order to find out to which device <code>/dev/sdx</code> our installation target is associated. We know that the Xubuntu live image is mounted at <code>/media/cdrom</code> (so this is <em>not</em> it) and that our target USB drive contains the 5 partitions that we created. In the following, I assume that again <code>/dev/sdb</code> corresponds to the installation target.</p>
<p>Note that the Xubuntu live system will try to mount the three luks partitions. Click <code>Cancel</code> three times in order not to do so.</p>
<p>We unlock the encrypted partitions and mount the required ones by hand,</p>
<pre><code>sudo -i
cryptsetup open /dev/sdb1 LUKS_BOOT
cryptsetup open /dev/sdb5 LUKS_ROOT
cd /
mkdir /target
mount /dev/mapper/LUKS_ROOT /target
mount /dev/mapper/LUKS_BOOT /target/boot
mount /dev/sdb3 /target/boot/efi
</code></pre>
<p>Then we change root to our new unfinished installation and mount everything:</p>
<pre><code>for n in dev dev/pts proc sys sys/firmware/efi/efivars run etc/resolv.conf; do mount --bind /$n /target/$n; done
chroot /target
mount -a
</code></pre>
<p>Now we merely need to <code>nano /etc/default/grub</code> and add a line</p>
<pre><code>GRUB_ENABLE_CRYPTODISK=y
</code></pre>
<p>Save the file by [Ctrl]+[o] and [Enter] and quit the editor by [Ctrl]+[x]. Then we install <code>grub2</code> in removable mode by,</p>
<pre><code>grub-install --removable /dev/sdb
update-grub
</code></pre>
<p>Presumably there is an error that there is no grub drive for the partition that carries the Xubuntu live system. We can safely ignore that. We press [Ctrl]+[d] in order to leave the <code>chroot</code> session and then use the graphical interface of Xubuntu in order to shut down the computer. The installation on our USB drive is complete.</p>
<h2 id=usage>Usage</h2>
<h3 id=how-to-boot-the-new-kali-linux-20214-usb-drive>How to Boot the New Kali Linux 2021.4 USB Drive</h3>
<p>When we boot from our USB drive either in legacy or in EFI mode, <code>grub2</code> asks for the passphrase (the one of the <code>/boot</code>) partition and then boots right into our new Kali Linux 2021.4.</p>
<p>On some older UEFI machines, however, we are thrown into a <code>grub2</code> shell. Nevertheless, we can simply type <code>exit</code> [Enter] and get to the prompt for the passphrase.</p>
<h3 id=kali-and-networking>Kali and Networking</h3>
<p>Kali Linux is very conservative about network connections, and so your new installation probably needs some further setup. If you intend to boot the USB drive on different machines, you will probably set up networking on a case by case basis.</p>
<p>If you wish to place WLAN under the control of the <code>NetworkManager</code> in the graphical interface, you need to <code>sudo nano /etc/NetworkManager/NetworkManager.conf</code> and under <code>[ifupdown]</code> set <code>managed=true</code>. I think <code>sudo systemctl restart NetworkManager</code> ought to suffice, but somehow I recall that it worked only after rebooting.</p>
<h3 id=hardware-limitations>Hardware Limitations</h3>
<p>I am not an expert on the Debian style installer that was used, but it seems that although it installs a full kernel with all modules, it copies only selected firmware drivers to the target installation. Apparently, the installer probes the hardware on which it is running and then installs the firmware appropriate for that very machine.</p>
<p>I performed a test installation on a Chinese made no-name Intel Core i5-10210U based laptop with integrated Intel graphics and sound, and I do have working sound on that machine. But when I boot the same installation on a Lenovo T14 AMD Gen 1 (AMD Ryzen 5 Pro 4650U with integrated Radeon graphics and Realtek ALC257 audio), then sound does not work. So you have to expect that some hardware specific manual configuration will be necessary. Fortunately, in my case, both ethernet and WLAN work out of the box on any hardware that I have tried so far.</p>
<p>Finally, although the installation allows to to /suspend to disk/ (/hibernate/), you cannot expect it to function when you put the system to sleep (/suspend/) on one hardware and then try to wake it up (/resume/) on a different machine.</p>
<h3 id=compilation-of-a-custom-kernel>Compilation of a Custom Kernel</h3>
<p>Compilation of custom kernel works as described in <a href=../../development/recompiling-the-kali-linux-kernel/index.html>these Kali instructions</a> with only minor adjustments.</p>
<p>Starting with the installation performed so far, we need the following packages:</p>
<pre><code>sudo apt-get install build-essential libncurses5-dev fakeroot xz-utils libelf-dev libssl-dev dwarves
</code></pre>
<p>We install the current kernel sources and unpack them inside <code>~/src</code> as follows,</p>
<pre><code>sudo apt-get install linux-source-5.15
mkdir ~/src
cd ~/src
tar -xzf /usr/src/linux-source-5.15.tar.xz
</code></pre>
<p>If you have a custom kernel configuration file, copy it to <code>~/src/linux-source-5.15/.config</code>. In order to use the configuration of the running kernel as a starting point, we obtain the configuration from the <code>/boot</code> partition,</p>
<pre><code>cp /boot/config-5.14.0-kali4-amd64 ~/src/linux-source-5.15/.config
</code></pre>
<p>The kernel is then configured as usual with</p>
<pre><code>cd ~/src/linux-source-5.15
make menuconfig
</code></pre>
<p>and compiled as follows. Note that we build the Debian style kernel packages here which automatically takes care of all patches, etc.</p>
<pre><code>make clean
make deb-pkg LOCALVERSION=-custom KDEB_PKGVERSION=$(make kernelversion)-1
ls ../*.deb
</code></pre>
<p>It suffices to install the newly created Debian kernel package. It includes an initial RAM disk which is able to decrypt the luks encrypted partitions and places everything on the <code>/boot</code> partition for <code>grub2</code> to find. The precise version of the kernel depends on the update status of your Kali 2021.4 at the time when you last upgraded and unpacked the sources. The above <code>ls ../*.deb</code> command shows the full names of the produced Debian packages.</p>
<pre><code>sudo dpkg -i ~/src/linux-image-5.15.5-custom_5.15.5-1_amd64.deb
</code></pre>
<p>It is not necessary to re-install <code>grub2</code> or to make any other manual adjustments. The encrypted boot procesudure still works.</p>
<h3 id=remarks-on-cryptography>Remarks on Cryptography</h3>
<ul>
<li>To anyone who is able to examine your USB drive, it will be obvious that there is a <code>grub2</code> boot partition, an EFI partition, as well as three luks encrypted partitions. There is no <em>plausible deniability</em>. This is because luks partitions have a standardized header.</li>
<li>Note that the full AES keys for the encryption are also stored in this header, merely protected by a passphrase. So it is not even required to attack the AES key itself, but rather the data present in the luks header allow an attack on the passphrase. An attacker might transfer the luks headers to a data centre of his choice and run a massively parallel dictionary attack. This is no surprise because luks encryption uses only <em>one factor</em>, knowing the passphrase. If you wanted to improve on this, you might decide to store the AES keys on yet another medium in order to obtain a <em>second factor</em>, possession of the passphase-encrypted AES key. But this would no longer be bootable by <code>grub2</code>.</li>
<li>Also note that it is the passphrase of the <code>/boot</code> partition that it sufficies to attack, and that is only luks1.</li>
<li>Encryption of the <code>/boot</code> partition substantially reduces the attack surface to an <em>evil maid attack</em>. Without encryption of <code>/boot</code>, an attacker who gets hold of your USB drive, can tamper with the kernel image and with the initial RAM disk stored on that <code>/boot</code> partition. This is no longer possible.</li>
<li>It might still be possible to replace the <code>grub2</code> boot loader by an alternative program that first asks for your passphrase, then has enough rights to access the network (on whatever machine you might be trying to boot from your USB drive) in order to exfiltrate your passphrase to the attacker, and which eventually uses your passphrase to boot your very Kali installation. You would not notice that this has happened.</li>
<li>There is still another potential software based <em>evil maid attack</em> left. The maid who finds your USB drive in your hotel room might first extract a bitwise copy of its content. She might then try to boot from it and notice the exact form of the prompt for the passphrase. She might then overwrite your USB drive with another boot loader that prompts for your passphrase in exactly the same fashion and immediately afterwards does what <em>she</em> wants. So if you plug in your USB drive the next time and boot from it, you will give away your passphrase to her boot loader. If she can then somehow exfiltrate your passphrase (by WLAN?), she not only has a bitwise copy of your drive, but also your passphrase. But you will immediately notice that this has happened as she is unlikely to be able to mimick your exact Kali installation.</li>
<li>You still need to trust the hardware on which you are running your USB drive.</li>
</ul>
<h2 id=acknowledgements>Acknowledgements</h2>
<p>The present instructions would not have been possible without</p>
<ul>
<li><a href=https://help.ubuntu.com/community/Full_Disk_Encryption_Howto_2019>Ubuntu Full Disk Encryption Howto 2019</a></li>
</ul>
</div>
<hr>
<p id=post-meta>
Updated on: 2022-Jan-24<br>
Author:
<a href=https://gitlab.com/voidyourwarranty rel=”nofollow” title="voidyourwarranty's profile">voidyourwarranty</a>
</p>
<hr>
<div id=pagination>
<a href=https://gitlab.com/kalilinux/documentation/kali-docs/edit/master/usb/usb-standalone-encrypted/index.md rel=noopener target=blank>
<i class=ti-pencil-alt></i>&nbsp;Edit this page
</a>
<div></div>
<a href=../live-usb-install-with-windows/index.html>
<i class=ti-arrow-left></i>
<span>Making a Kali Bootable USB Drive on Windows</span>
</a>
<a href=../updating-kali-on-usb/index.html>
<span>Updating Kali Linux on USB</span>
<i class=ti-arrow-right></i>
</a>
</div>
</article>
</section>
</main>
<script src=../../../plugins/highlight/highlight.pack.js></script>
<script>hljs.registerLanguage('shell',a=>({name:'Shell Session',aliases:['console','shellsession'],contains:[{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*$/},{className:'prompt',begin:/^\s*([/~\w[\]()@:.-]+[>%$#]|\$)\s*/,starts:{end:/[^\\]$/,subLanguage:'bash'}},{className:'prompt',begin:/┌──\([^)]+\)-\[~?[/\w-]*\]\n└─[#$]/,starts:{end:/[^\\]$/,subLanguage:'bash'}}]})),hljs.highlightAll(),window.addEventListener('DOMContentLoaded',()=>$$('.hljs-prompt').forEach(a=>{let c='#2777ff',b='#5EBDAB';/#\s*$/.test(a.innerHTML)&&(c='#EC0101',b='#367BF0'),a.innerHTML=a.innerHTML.replace(/([^)]+)(:)(~?[/\w.-]*)([#$])/,`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="font-weight:bold;color:${b}">$3</span>`+`<span style="color:white;">$4</span>`),a.innerHTML=a.innerHTML.replace(/┌──\(([^)]+)\)-\[(~?[/\w.-]*)\]\n└─([#$])/,`<span style="color:${b}">┌──(</span>`+`<span style="color:${c};font-weight:bold">$1</span>`+`<span style="color:${b}">)-[</span>`+`<span style="color:white;font-weight:bold">$2</span>`+`<span style="color:${b}">]\n`+`└─</span><span style="color:${c};font-weight:bold">$3</span>`)}),!1)</script>
<footer>
<div class=darkmode-switch>
<span>LIGHT</span><label class=switch>
<input type=checkbox name=toggle-darkmode>
<div></div>
</label><span>DARK</span>
</div>
<div class=container>
<div>
<h4>Downloads</h4>
<a href=../../../get-kali/index.html rel=noopener target=_blank>Kali Linux</a>
<a href=../../../get-kali/index.html#kali-mobile rel=noopener target=_blank>Kali NetHunter</a>
<h4>Links</h4>
<a href=../../../index.html rel=noopener target=_blank>Home</a>
<a href=../../../blog/index.html rel=noopener target=_blank>Blog</a>
<a href=../../index.html rel=noopener target=_blank>Documentation</a>
<a href=../../../tools/index.html rel=noopener target=_blank>Tools</a>
<a href=https://forums.kali.org/ rel=noopener target=_blank>Support Forum</a>
<a href=https://bugs.kali.org/ rel=noopener target=_blank>Bug Tracker</a>
<a href=https://status.kali.org/ rel=noopener target=_blank>System Status</a>
</div>
<div>
<h4>Policies</h4>
<a href=../../policy/cookie/index.html>Cookie Policy</a>
<a href=../../policy/privacy/index.html>Privacy Policy</a>
<a href=../../policy/trademark/index.html>Trademark Policy</a>
<h4>Follow Us</h4>
<a href=https://twitter.com/kalilinux title=Twitter rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717.0-4.92 2.203-4.92 4.917.0.39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475.0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314.0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39.0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054.0 13.999-7.496 13.999-13.986.0-.209.0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
Twitter
</a>
<a href=https://www.facebook.com/kalilinux title=Facebook rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.9981 11.9991C23.9981 5.37216 18.626.0 11.9991.0 5.37216.0.0 5.37216.0 11.9991c0 5.9891 4.38789 10.9531 10.1242 11.8533V15.4676H7.07758V11.9991H10.1242V9.35553c0-3.00727 1.7914-4.66839 4.5322-4.66839 1.3128.0 2.686.23435 2.686.23435v2.9529h-1.513C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991h3.3279l-.532 3.4685H13.8739v8.3848C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991z"/></svg>
Facebook
</a>
<a href=https://gitlab.com/kalilinux title=GitLab rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M23.955 13.587l-1.342-4.135-2.664-8.189c-.135-.423-.73-.423-.867.0L16.418 9.45H7.582L4.919 1.263C4.783.84 4.185.84 4.05 1.26L1.386 9.449.044 13.587c-.121.375.014.789.331 1.023L12 23.054l11.625-8.443c.318-.235.453-.647.33-1.024"/></svg>
GitLab
</a>
<a href=https://github.com/kalilinux title=GitHub rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
GitHub
</a>
<a href=https://www.microsoft.com/en-us/p/kali-linux/9pkr34tncv07 title="Microsoft Store" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M11.4 24H0V12.6h11.4V24zM24 24H12.6V12.6H24V24zM11.4 11.4H0V0h11.4v11.4zm12.6.0H12.6V0H24v11.4z"/></svg>
Microsoft Store
</a>
<a href=https://hub.docker.com/u/kalilinux title=Docker rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M4.82 17.275c-.684.0-1.304-.56-1.304-1.24s.56-1.243 1.305-1.243c.748.0 1.31.56 1.31 1.242s-.622 1.24-1.305 1.24zm16.012-6.763c-.135-.992-.75-1.8-1.56-2.42l-.315-.25-.254.31c-.494.56-.69 1.553-.63 2.295.06.562.24 1.12.554 1.554-.254.13-.568.25-.81.377-.57.187-1.124.25-1.68.25H.097l-.06.37c-.12 1.182.06 2.42.562 3.54l.244.435v.06c1.5 2.483 4.17 3.6 7.078 3.6 5.594.0 10.182-2.42 12.357-7.633 1.425.062 2.864-.31 3.54-1.676l.18-.31-.3-.187c-.81-.494-1.92-.56-2.85-.31l-.018.002zm-8.008-.992h-2.428v2.42h2.43V9.518l-.002.003zm0-3.043h-2.428v2.42h2.43V6.48l-.002-.003zm0-3.104h-2.428v2.42h2.43v-2.42h-.002zm2.97 6.147H13.38v2.42h2.42V9.518l-.007.003zm-8.998.0H4.383v2.42h2.422V9.518l-.01.003zm3.03.0h-2.4v2.42H9.84V9.518l-.015.003zm-6.03.0H1.4v2.42h2.428V9.518l-.03.003zm6.03-3.043h-2.4v2.42H9.84V6.48l-.015-.003zm-3.045.0H4.387v2.42H6.8V6.48l-.016-.003z"/></svg>
Docker
</a>
<a href=https://app.vagrantup.com/kalilinux title=Vagrant rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.672 6.774V4.917l3.164-1.822L3.56.005.397 1.852v2.263L7.52 21.41 12 23.995v-6.496l2.107-1.224-.024-.015 4.245-9.486V4.917l5.275-3.065L20.439.005l-5.272 3.087h-.003v2.11L12 12.584v2.467l-2.11 1.224zm3.164-3.66L8.814 3.1 5.672 4.917v1.857l4.218 9.501L12 15.234v-2.65L8.836 5.202zm9.492 1.803v1.857l-4.22 9.101L12 17.332v6.663l4.521-2.607L23.603 4.05V1.852z"/></svg>
Vagrant
</a>
<a href=https://aws.amazon.com/marketplace/pp/B08LL91KKB title="Amazon AWS" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183.0.08-.048.16-.152.24l-.503.335a.383.383.0 01-.208.072c-.08.0-.16-.04-.239-.112a2.47 2.47.0 01-.287-.375 6.18 6.18.0 01-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67.0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533.0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272.0.551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28.0-.568.031-.863.103s-.583.16-.862.272a2.287 2.287.0 01-.28.104.488.488.0 01-.127.023c-.112.0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597.0 01.224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84.0 011.246-.151c.95.0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263.0.534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66.0 00-.735-.136 6.02 6.02.0 00-.75-.048c-.535.0-.926.104-1.19.32-.263.215-.39.518-.39.917.0.375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144.0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398.0 01-.072-.32c0-.128.064-.2.191-.2h.783c.151.0.255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549.0 01.32-.08h.638c.152.0.256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52.0 01.311-.08h.743c.127.0.2.065.2.2.0.04-.009.08-.017.128a1.137 1.137.0 01-.056.2l-1.923 6.17c-.048.16-.104.263-.168.311a.51.51.0 01-.303.08h-.687c-.151.0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415.0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563.0 01-.048-.224v-.407c0-.167.064-.247.183-.247.048.0.096.008.144.024s.12.048.2.08c.271.12.566.215.878.279.319.064.63.096.95.096.502.0.894-.088 1.165-.264a.86.86.0 00.415-.758.777.777.0 00-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902.0 01-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175.0.359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69.0 01.24.2.43.43.0 01.071.263v.375c0 .168-.064.256-.184.256a.83.83.0 01-.303-.096 3.652 3.652.0 00-1.532-.311c-.455.0-.815.071-1.062.223-.248.152-.375.383-.375.71.0.224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117.0.343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zm1.509 3.88c-2.626 1.94-6.442 2.969-9.722 2.969-4.598.0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914.0 6.114-.607 9.06-1.852.439-.2.814.287.383.607zm1.094-1.246c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z"/></svg>
Amazon AWS
</a>
<a href=https://azuremarketplace.microsoft.com/en/marketplace/apps/kali-linux.kali-linux title="Microsoft Azure" rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M5.483 21.3H24L14.025 4.013l-3.038 8.347 5.836 6.938L5.483 21.3zM13.23 2.7 6.105 8.677.0 19.253h5.505v.014L13.23 2.7z"/></svg>
Microsoft Azure
</a>
<a href=../../../rss.xml title=RSS rel=noopener target=_blank><svg viewBox="0 0 24 24" fill="currentcolor" width="24" height="24"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg>
RSS
</a>
</div>
<div><svg id="footer-logo" viewBox="0 0 135.47 135.47"><path fill="currentcolor" d="m71.766 36.352s-10.212-.6795-27.602 4.7619c-17.722 5.5452-27.773 13.405-27.773 13.405s26.414-14.748 56.228-15.586zm38.09 16.035 1.3276-.08664s-7.6062-9.2286-22.165-13.724c8.1839 3.3267 15.307 7.7345 20.837 13.81zm2.1727 3.8344c.20411-.3539.86302 1.1243 1.3634 1.7453.0212.124.0564.19967-.23373.13998-.0244-.12747-.0665-.16444-.0665-.16444s-.70029-.41667-.91499-.71224c-.21487-.29556-.253-.81255-.14825-1.0086zm17.867 43.93s1.6147-18.538-27.511-22.812c-3.6915-.54163-8.3599-.9585-13.082-.97044-23.344.30865-24.195-26.924-6.6044-28.299 7.2901-.60152 15.995 3.3311 24.505 7.2941-.0316 1.0569.0121 1.9961.70646 2.864.69414.86762 3.3607 1.8142 4.2128 2.3031.85203.48907 3.5816 2.2245 5.2543 4.4017.36275-.67854 3.3921-2.6504 3.3921-2.6504s-.72571.01579-2.414-.61519c-1.6885-.63098-3.6921-2.5401-3.7395-2.6504-.0473-.11052-.0788-.28401.31578-.36295.2996-.25224-.37893-1.0727-.67874-1.3723-.2996-.2998-2.3036-3.7073-2.3508-3.7863-.0473-.07894-.0632-.1577-.20507-.25243-.4419-.1421-2.3826.20506-2.3826.20506s-2.9847-1.4659-4.0135-4.6264c.015.55358-.5118 1.158.0 2.4298-1.5562-.65832-2.8929-1.7811-3.9472-4.5557-.62751 1.5781.0 2.5815.0 2.5815s-3.6646-1.024-4.2509-4.4036c-.6435 1.5171.0 2.4296.0 2.4296s-5.9742-3.1172-15.901-3.1624c-6.646-.60961-8.0296-12.301-7.4139-14.269.0.0-9.586-5.0521-28.456-7.2841-18.87-2.2322-34.346-.33638-34.346-.33638s33.421-1.6039 60.195 9.2356c.91018 4.0709 3.6482 10.851 5.1229 14.11-4.2197 2.9175-8.9781 5.6609-9.7191 15.391-.74074 9.7297 7.6245 18.288 17.998 18.552 9.8502.52469 16.656.59921 24.905 4.8759 7.8739 4.3537 14.33 17.62 14.969 29.551.69008-8.8524-2.632-27.889-18.134-33.669 21.667 3.7917 23.573 19.854 23.573 19.854zm-58.64-65.253-.77963-2.5147s-12.864-2.2844-30.16-1.055c-17.296 1.2294-34.759 7.2839-34.759 7.2839s35.732-8.991 65.698-3.7143"/></svg>
© OffSec Services Limited 2022. All rights reserved.
</div>
</div>
</footer>
<script src=../../../script.min.js></script>
</body>

<!-- Mirrored from www.kali.org/docs/usb/usb-standalone-encrypted/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 12 Feb 2022 08:05:47 GMT -->
</html>